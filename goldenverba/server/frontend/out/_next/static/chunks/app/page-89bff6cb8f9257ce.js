(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{18517:(e,t,l)=>{Promise.resolve().then(l.bind(l,92016))},38640:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});var s=l(71729);let a=e=>{let{title:t="",key:l="Button".concat(t),Icon:a,onClick:n=()=>{},onMouseEnter:r=()=>{},onMouseLeave:i=()=>{},disabled:o=!1,className:c="",text_class_name:d="",selected:x=!1,selected_color:u="bg-button-verba",selected_text_color:m="text-text-verba-button",text_size:f="text-xs",icon_size:g=12,type:p="button",loading:b=!1,circle:h=!1,onClickParams:v=[]}=e;return(0,s.jsx)("button",{className:c+"flex scale-100 items-center justify-center gap-1 p-3 transition-all duration-300 active:scale-95 ".concat(h?"rounded-full":"rounded-lg"," hover:bg-button-hover-verba hover:text-text-verba-button ").concat(x?"".concat(u,"shadow-md").concat(m):"bg-button-verba text-text-alt-verba-button"," "),disabled:o,onClick:e=>n(e,...v),onMouseEnter:r,onMouseLeave:i,type:p,children:b?(0,s.jsx)("span",{className:"loading loading-spinner loading-xs text-text-verba-button"}):(0,s.jsxs)(s.Fragment,{children:[a&&(0,s.jsx)(a,{className:"w-[20px]",size:g}),t&&(0,s.jsx)("p",{className:"".concat(f," ").concat(d),title:t,children:t})]})},l)}},69918:(e,t,l)=>{"use strict";l.d(t,{Ix:()=>g,Nn:()=>j,T7:()=>r,XJ:()=>o,Yu:()=>v,_E:()=>y,aF:()=>b,bS:()=>d,iX:()=>m,ke:()=>_,m9:()=>N,mq:()=>i,pQ:()=>h,rR:()=>w,u6:()=>p,vK:()=>u,vY:()=>C,wR:()=>f,wz:()=>c,y:()=>x});let s=async e=>{try{return(await fetch(e)).ok}catch(e){return!1}},a=async()=>{if(await s("http://localhost:8000/api/health"))return"http://localhost:8000";if(await s("/api/health"))return window.location.origin;throw Error("Both health checks failed, please check the Verba Server")},n=async e=>{try{let t=await a(),l=await fetch("".concat(t).concat(e),{method:"GET"});return await l.json()}catch(e){return null}},r=()=>n("/api/health"),i=async(e,t,l,s)=>{let n=await a(),r=await fetch("".concat(n,"/api/connect"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credentials:{deployment:e,url:t,key:l},port:s})});return await r.json()},o=async e=>{try{let t=await a(),l=await fetch("".concat(t,"/api/get_rag_config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await l.json()}catch(e){return null}},c=async(e,t)=>{if(!e)return!1;try{let l=await a(),s=await fetch("".concat(l,"/api/set_rag_config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rag_config:e,credentials:t})});return 200===s.status}catch(e){return!1}},d=async(e,t,l)=>{try{let s=await a(),n=await fetch("".concat(s,"/api/set_theme_config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({themes:e,theme:t,credentials:l})});return 200===n.status}catch(e){return!1}},x=async(e,t,l,s,n)=>{try{let r=await a(),i=await fetch("".concat(r,"/api/query"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,RAG:t,labels:l,documentFilter:s,credentials:n})});return await i.json()}catch(e){return null}},u=async(e,t)=>{if(!e)return null;try{let l=await a(),s=await fetch("".concat(l,"/api/get_document"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,credentials:t})});return await s.json()}catch(e){return null}},m=async(e,t,l)=>{try{let s=await a(),n=await fetch("".concat(s,"/api/get_datacount"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({embedding_model:e,documentFilter:t,credentials:l})});return await n.json()}catch(e){return null}},f=async e=>{try{let t=await a(),l=await fetch("".concat(t,"/api/get_labels"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await l.json()}catch(e){return null}},g=async(e,t,l,s)=>{if(!e)return null;try{let n=await a(),r=await fetch("".concat(n,"/api/get_content"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,page:t,chunkScores:l,credentials:s})});return await r.json()}catch(e){return null}},p=async(e,t,l)=>{if(!e)return null;try{let s=await a(),n=await fetch("".concat(s,"/api/get_vectors"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,showAll:t,credentials:l})});return await n.json()}catch(e){return null}},b=async(e,t,l,s)=>{if(!e)return null;try{let n=await a(),r=await fetch("".concat(n,"/api/get_chunks"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,page:t,pageSize:l,credentials:s})});return await r.json()}catch(e){return null}},h=async(e,t,l)=>{if(!e)return null;try{let s=await a(),n=await fetch("".concat(s,"/api/get_chunk"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,embedder:t,credentials:l})});return await n.json()}catch(e){return null}},v=async(e,t,l,s,n)=>{try{let r=await a(),i=await fetch("".concat(r,"/api/get_all_documents"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,labels:t,page:l,pageSize:s,credentials:n})});return await i.json()}catch(e){return null}},j=async(e,t)=>{try{let l=await a(),s=await fetch("".concat(l,"/api/delete_document"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,credentials:t})});return 200===s.status}catch(e){return!1}},w=async(e,t)=>{try{let l=await a(),s=await fetch("".concat(l,"/api/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({resetMode:e,credentials:t})});return 200===s.status}catch(e){return!1}},N=async e=>{try{let t=await a(),l=await fetch("".concat(t,"/api/get_meta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await l.json()}catch(e){return null}},y=async(e,t,l)=>{try{let s=await a(),n=await fetch("".concat(s,"/api/get_suggestions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,limit:t,credentials:l})});return await n.json()}catch(e){return null}},_=async(e,t)=>{try{let l=await a(),s=await fetch("".concat(l,"/api/delete_suggestion"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,credentials:t})});return 200===s.status}catch(e){return!1}},C=async(e,t,l)=>{try{let s=await a(),n=await fetch("".concat(s,"/api/get_all_suggestions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page:e,pageSize:t,credentials:l})});return await n.json()}catch(e){return null}}},92016:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>eH});var s=l(71729),a=l(15187),n=l(70890),r=l(43189),i=l(69918),o=l(38221),c=l(89498),d=l(61717),x=l(10752);let u=e=>{let{tooltip_text:t,display_text:l}=e,[a,n]=(0,r.useState)(!1);return(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)("div",{className:"relative flex cursor-pointer flex-col items-center text-text-alt-verba",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[(0,s.jsx)("p",{className:"ml-3 text-sm",children:l}),(0,s.jsx)("div",{className:"absolute top-full left-full z-30 mt-2 w-[300px] rounded-xl bg-bg-verba p-4 text-text-alt-verba text-xs shadow-md transition-opacity duration-300 ".concat(a?"opacity-100":"pointer-events-none opacity-0"),children:(0,s.jsx)("p",{className:"w-full whitespace-normal text-xs",children:t})})]})})};var m=l(38640),f=l(39783),g=l(84765),p=l(68700),b=l(80622);let h=e=>{var t,l;let{selectedDocument:a,credentials:n,selectedTheme:c}=e,[d,x]=(0,r.useState)(!1),[u,h]=(0,r.useState)([]),[v,j]=(0,r.useState)(1),[w,N]=(0,r.useState)(0),[y,_]=(0,r.useState)(!0),C=(0,r.useCallback)(async e=>{try{x(!0);let t=await (0,i.aF)(a,e,S,n);if(t){if(""!==t.error)return x(!1),h([]),!1;return h(t.chunks),x(!1),t.chunks.length>0}return!1}catch(e){return x(!1),!1}},[a,n]);(0,r.useEffect)(()=>{C(v),_(1===v&&0===w)},[v,w,C]),(0,r.useEffect)(()=>{C(1),N(0),_(!0)},[C]);let S=10,k=async()=>{w===u.length-1?(await C(v+1)?j(e=>e+1):(await C(1),j(1)),N(0)):N(e=>e+1)},A=async()=>{if(0===w)if(v>1){let e=v-1;await C(e)&&(j(e),N(S-1))}else{let e=v,t=!0;for(;t;)(t=await C(e+1))&&e++;await C(e),j(e),N(u.length-1)}else N(e=>e-1)};return 0===u.length?(0,s.jsx)("div",{children:d&&(0,s.jsx)("div",{className:"flex h-full items-center justify-center gap-2 text-text-verba",children:(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})})}):(0,s.jsx)("div",{className:"flex h-full flex-col",children:u.length>0&&(0,s.jsxs)("div",{className:"flex h-full flex-col overflow-hidden rounded-lg bg-bg-alt-verba",children:[(0,s.jsxs)("div",{className:"flex-grow overflow-hidden p-3",children:[(0,s.jsx)("div",{className:"mb-2 flex justify-between",children:(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)("div",{className:"flex w-fit items-center gap-2 rounded-full bg-secondary-verba p-3",children:[(0,s.jsx)(f.ic6,{size:12}),(0,s.jsxs)("p",{className:"flex text-text-verba text-xs",children:["Chunk ",(null==(t=u[w])?void 0:t.chunk_id)||"N/A"]})]})})}),(0,s.jsx)("div",{className:"h-[calc(100%-3rem)] overflow-y-auto",children:(0,s.jsx)("div",{className:"md:prose-base sm:prose-sm max-w-[50vw] flex-wrap items-center justify-center prose-pre:bg-bg-alt-verba p-3",children:(0,s.jsx)(g.oz,{components:{code(e){let{inline:t,className:l,children:a,...n}=e,r=/language-(\w+)/.exec(l||"");return!t&&r?(0,s.jsx)(p.A,{language:r[1],PreTag:"div",style:"dark"===c.theme?b.bM:b.Je,...n,children:String(a).replace(/\n$/,"")}):(0,s.jsx)("code",{className:l,...n,children:a})}},children:(null==(l=u[w])?void 0:l.content)||"No content available"})})})]}),u.length>1&&(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 bg-bg-alt-verba p-3",children:[(0,s.jsx)(m.A,{className:"btn-sm min-w-min max-w-[200px]",disabled:y,Icon:o.vpL,onClick:A,text_class_name:"text-xs",title:"Previous Chunk"}),(0,s.jsx)(m.A,{className:"btn-sm min-w-min max-w-[200px]",Icon:o.QyA,onClick:k,text_class_name:"text-xs",title:"Next Chunk"})]})]})})};var v=l(61247);let j=e=>{let{document:t,selectedDocument:l,selectedTheme:a,credentials:n,chunkScores:c}=e,[d,x]=(0,r.useState)(!0),[u,h]=(0,r.useState)(1),[j,w]=(0,r.useState)(1),[N,y]=(0,r.useState)([]),_=(0,r.useRef)(null),C=(0,r.useCallback)(async()=>{try{x(!0);let e=await (0,i.Ix)(l,u,c||[],n);e&&(""!==e.error?(y([{content:e.error,chunk_id:0,score:0,type:"text"}]),h(1),w(1)):(y(e.content),w(e.maxPage)),x(!1))}catch(e){x(!1)}},[l,u,c,n]);return((0,r.useEffect)(()=>{t?(C(),h(1)):(y([]),h(1),w(1))},[t,C]),(0,r.useEffect)(()=>{t?C():(y([]),h(1),w(1))},[t,C]),(0,r.useEffect)(()=>{if(c&&c.length>0){var e;null==(e=_.current)||e.scrollIntoView({behavior:"smooth"})}},[c]),t)?(0,s.jsx)("div",{className:"flex h-full flex-col",children:t&&(0,s.jsxs)("div",{className:"flex h-full flex-col overflow-hidden rounded-lg bg-bg-alt-verba",children:[(0,s.jsx)("div",{className:"bg-bg-alt-verba p-3",children:(0,s.jsxs)("div",{className:"flex w-full justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[d&&(0,s.jsx)("div",{className:"flex items-center justify-center gap-2 text-text-verba",children:(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})}),(0,s.jsx)("p",{className:"max-w-[350px] truncate font-bold text-lg",title:t.title,children:t.title})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(t.labels).map(e=>{let[l,a]=e;return(0,s.jsx)(m.A,{className:"btn-sm min-w-min max-w-[200px]",text_class_name:"truncate max-w-[200px]",text_size:"text-xs",title:a},t.title+l+a)})})]})}),(0,s.jsx)("div",{className:"flex-grow overflow-hidden p-3",children:(0,s.jsx)("div",{className:"h-full overflow-y-auto",children:null==N?void 0:N.map((e,t)=>((e,t)=>"text"===e.type?(0,s.jsx)("div",{className:"flex p-2",ref:c?null:_,children:(0,s.jsx)("div",{className:"prose-sm max-w-[50vw] flex-wrap items-center justify-center prose-pre:bg-bg-alt-verba p-3",children:(0,s.jsx)(g.oz,{components:{code(e){let{inline:t,className:l,children:n,...r}=e,i=/language-(\w+)/.exec(l||"");return!t&&i?(0,s.jsx)(p.A,{language:i[1],PreTag:"div",style:"dark"===a.theme?b.bM:b.Je,...r,children:String(n).replace(/\n$/,"")}):(0,s.jsx)("code",{className:l,...r,children:n})}},children:e.content})})},"CONTENT_SNIPPET".concat(t)):(0,s.jsxs)("div",{className:"flex flex-col gap-2 rounded-3xl border-2 border-secondary-verba p-2 shadow-lg",ref:_,children:[(0,s.jsx)("div",{className:"flex justify-between",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("div",{className:"flex w-fit items-center gap-2 rounded-full bg-secondary-verba p-3",children:[(0,s.jsx)(v.pCw,{size:12}),(0,s.jsx)("p",{className:"flex text-text-verba text-xs",children:"Context Used"})]}),(0,s.jsxs)("div",{className:"flex w-fit items-center gap-2 rounded-full bg-secondary-verba p-3",children:[(0,s.jsx)(f.ic6,{size:12}),(0,s.jsxs)("p",{className:"flex text-text-verba text-xs",children:["Chunk ",e.chunk_id+1]})]}),e.score>0&&(0,s.jsxs)("div",{className:"flex w-fit items-center gap-2 rounded-full bg-primary-verba p-3",children:[(0,s.jsx)(v.pCw,{size:12}),(0,s.jsx)("p",{className:"flex text-text-verba text-xs",children:"High Relevancy"})]})]})}),(0,s.jsx)("div",{className:"md:prose-base sm:prose-sm w-full flex-wrap items-center justify-center prose-pre:bg-bg-alt-verba p-3",children:(0,s.jsx)(g.oz,{components:{code(e){let{inline:t,className:l,children:n,...r}=e,i=/language-(\w+)/.exec(l||"");return!t&&i?(0,s.jsx)(p.A,{language:i[1],PreTag:"div",style:"dark"===a.theme?b.bM:b.Je,...r,children:String(n).replace(/\n$/,"")}):(0,s.jsx)("code",{className:l,...r,children:n})}},children:e.content})})]}))(e,t))})}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 bg-bg-alt-verba p-3",children:[(0,s.jsx)(m.A,{className:"btn-sm min-w-min max-w-[200px]",Icon:o.vpL,onClick:()=>{1===u?h(j):h(e=>e-1)},text_class_name:"text-xs",title:"Previous ".concat(c?"Chunk":"Page")}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("p",{className:"text-text-verba text-xs",children:[c?"Chunk ":"Page "," ",u]})}),(0,s.jsx)(m.A,{className:"btn-sm min-w-min max-w-[200px]",Icon:o.QyA,onClick:()=>{u===j?h(1):h(e=>e+1)},text_class_name:"text-xs",title:"Next ".concat(c?"Chunk":"Page")})]})]})}):(0,s.jsx)("div",{})},w=e=>{let{selectedDocument:t,credentials:l}=e,[a,n]=(0,r.useState)(!0),[o,c]=(0,r.useState)(null),d=(0,r.useCallback)(async()=>{try{n(!0);let e=await (0,i.vK)(t,l);e&&(""!==e.error?c(null):c(e.document),n(!1))}catch(e){n(!1)}},[t,l]);return(0,r.useEffect)(()=>{d()},[d]),(0,s.jsx)("div",{className:"flex h-full flex-col",children:a?(0,s.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,s.jsx)("span",{className:"loading loading-spinner loading-md bg-text-alt-verba text-text-verba"})}):o&&(0,s.jsxs)("div",{className:"flex h-full flex-col overflow-hidden rounded-lg bg-bg-alt-verba",children:[(0,s.jsxs)("div",{className:"flex flex-col items-start justify-start gap-2 p-4",children:[(0,s.jsx)("p",{className:"flex text-start font-bold text-text-alt-verba text-xs",children:"Title"}),(0,s.jsx)("p",{className:"max-w-full truncate text-text-verba",title:o.title,children:o.title})]}),(0,s.jsxs)("div",{className:"flex flex-col items-start justify-start gap-2 p-4",children:[(0,s.jsx)("p",{className:"flex text-start font-bold text-text-alt-verba text-xs",children:"Metadata"}),(0,s.jsx)("p",{className:"max-w-full text-text-verba",children:o.metadata})]}),(0,s.jsxs)("div",{className:"flex flex-col items-start justify-start gap-2 p-4",children:[(0,s.jsx)("p",{className:"flex text-start font-bold text-text-alt-verba text-xs",children:"Extension"}),(0,s.jsx)("p",{className:"max-w-full text-text-verba",children:o.extension})]}),(0,s.jsxs)("div",{className:"flex flex-col items-start justify-start gap-2 p-4",children:[(0,s.jsx)("p",{className:"flex text-start font-bold text-text-alt-verba text-xs",children:"File Size"}),(0,s.jsx)("p",{className:"max-w-full text-text-verba",children:o.fileSize})]}),(0,s.jsxs)("div",{className:"flex flex-col items-start justify-start gap-2 p-4",children:[(0,s.jsx)("p",{className:"flex text-start font-bold text-text-alt-verba text-xs",children:"Source"}),(0,s.jsx)("button",{className:"max-w-full truncate text-text-verba",onClick:()=>window.open(o.source,"_blank"),title:o.source,children:o.source})]}),(0,s.jsxs)("div",{className:"flex flex-col items-start justify-start gap-2 p-4",children:[(0,s.jsx)("p",{className:"flex text-start font-bold text-text-alt-verba text-xs",children:"Labels"}),(0,s.jsx)("p",{className:"max-w-full text-text-verba",children:o.labels})]})]})})},N=(0,n.default)(()=>Promise.all([l.e(50),l.e(238)]).then(l.bind(l,32238)),{loadableGenerated:{webpack:()=>[32238]},ssr:!1,loading:()=>(0,s.jsx)("div",{className:"flex h-[45vh] w-full items-center justify-center",children:(0,s.jsx)("span",{className:"loading loading-spinner"})})}),y=e=>{let{credentials:t,selectedDocument:l,setSelectedDocument:a,chunkScores:n,production:f,selectedTheme:g,documentFilter:p,setDocumentFilter:b,addStatusMessage:v}=e,[y,_]=(0,r.useState)("Content"),[,C]=(0,r.useState)(!1),[S,k]=(0,r.useState)(null),A=(0,r.useCallback)(async()=>{try{C(!0);let e=await (0,i.vK)(l,t);e&&(""!==e.error?(C(!1),k(null),a(null)):(k(e.document),C(!1)))}catch(e){C(!1)}},[l,t,a]);return((0,r.useEffect)(()=>{l?A():k(null)},[A,l]),l)?(0,s.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex h-min w-full items-center justify-end gap-2 rounded-2xl bg-bg-alt-verba p-3 lg:justify-between",children:[(0,s.jsx)("div",{className:"hidden justify-start gap-2 lg:flex",children:(0,s.jsx)(u,{display_text:S?S.title:"Loading...",tooltip_text:"Inspect your all information about your document, such as chunks, metadata and more."})}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)(m.A,{Icon:d.wnB,onClick:()=>_("Content"),selected:"Content"===y,selected_color:"bg-secondary-verba",title:"Content"}),(0,s.jsx)(m.A,{Icon:d.kn0,onClick:()=>_("Chunks"),selected:"Chunks"===y,selected_color:"bg-secondary-verba",title:"Chunks"}),(0,s.jsx)(m.A,{Icon:x.Y$f,onClick:()=>_("Vector Space"),selected:"Vector Space"===y,selected_color:"bg-secondary-verba",title:"Vector"}),(0,s.jsx)(m.A,{Icon:d.uDv,onClick:()=>{a(null)}})]})]}),(0,s.jsxs)("div",{className:"flex h-full w-full flex-col overflow-y-auto overflow-x-hidden rounded-2xl bg-bg-alt-verba p-6",children:["Content"===y&&(0,s.jsx)(j,{...n&&{chunkScores:n},credentials:t,document:S,selectedDocument:l,selectedTheme:g}),"Chunks"===y&&(0,s.jsx)(h,{credentials:t,selectedDocument:l,selectedTheme:g}),"Vector Space"===y&&(0,s.jsx)(N,{...n&&{chunkScores:n},credentials:t,production:f,selectedDocument:l}),"Metadata"===y&&(0,s.jsx)(w,{credentials:t,selectedDocument:l})]}),(0,s.jsxs)("div",{className:"flex h-min w-full items-center justify-between gap-2 rounded-2xl bg-bg-alt-verba p-3",children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[p.some(e=>e.uuid===l)&&(0,s.jsx)(m.A,{Icon:d.uDv,onClick:()=>{b(p.filter(e=>e.uuid!==l)),v("Removed document from Chat","INFO")},selected:!0,selected_color:"bg-warning-verba",title:"Delete from Chat"}),!p.some(e=>e.uuid===l)&&S&&(0,s.jsx)(m.A,{Icon:c.j8n,onClick:()=>{b([...p,{uuid:l,title:S.title}]),v("Added document to Chat","SUCCESS")},title:"Add to Chat"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[l&&S&&S.source&&(0,s.jsx)(m.A,{Icon:o.EQc,onClick:()=>{var e;e=S.source,window.open(e,"_blank","noopener,noreferrer")},title:"Go To Source"}),(0,s.jsx)(m.A,{Icon:o.__w,onClick:()=>_("Metadata"),selected:"Metadata"===y,selected_color:"bg-secondary-verba",title:"Document Info"})]})]})]}):(0,s.jsx)("div",{})};var _=l(71329),C=l(58531);function S(e){return"object"==typeof e&&null!==e&&"Client"in e&&"function"==typeof e.Client}function k(){return!!C.env.NEXT_PUBLIC_LANGSMITH_API_KEY}async function A(e,t,s,a){if(k())try{var n,r;let i=await l.e(10).then(l.bind(l,2010));if(!S(i))throw Error("Invalid LangSmith module structure");let o=new i.Client({apiUrl:null!=(n=C.env.NEXT_PUBLIC_LANGSMITH_ENDPOINT)?n:"https://api.smith.langchain.com",apiKey:C.env.NEXT_PUBLIC_LANGSMITH_API_KEY,defaultProjectName:null!=(r=C.env.NEXT_PUBLIC_LANGSMITH_PROJECT)?r:"verba-frontend"}),c={name:e,inputs:t,run_type:"chain"};void 0!==s&&(c.outputs=s),void 0!==a&&(c.extra=a),await o.createRun(c)}catch(e){}}async function E(e,t,s){if(k())try{var a,n;let r=await l.e(10).then(l.bind(l,2010));if(!S(r))throw Error("Invalid LangSmith module structure");let i=new r.Client({apiUrl:null!=(a=C.env.NEXT_PUBLIC_LANGSMITH_ENDPOINT)?a:"https://api.smith.langchain.com",apiKey:C.env.NEXT_PUBLIC_LANGSMITH_API_KEY,defaultProjectName:null!=(n=C.env.NEXT_PUBLIC_LANGSMITH_PROJECT)?n:"verba-frontend"}),o={name:"feedback",inputs:{target:e,value:t},outputs:{},run_type:"chain"};void 0!==s&&(o.extra=s),await i.createRun(o)}catch(e){}}var I=l(29921),R=l.n(I),D=l(4295),O=l.n(D),T=l(96609),F=l.n(T),P=l(98287),M=l.n(P);let L={Inter:R(),Plus_Jakarta_Sans:O(),Open_Sans:F(),PT_Mono:M()},G=e=>{let t=e||document.activeElement;t&&t instanceof HTMLElement&&t.blur()};var z=l(46170),J=l(63838);function U(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];return(0,J.QP)((0,z.$)(t))}var B=l(16470);let V=(0,l(4812).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md font-medium text-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}});function W(e){let{className:t,variant:l,size:a,asChild:n=!1,...r}=e,i=n?B.DX:"button";return(0,s.jsx)(i,{className:U(V({variant:l,size:a,className:t})),"data-slot":"button",...r})}var H=l(67126);let K=H.Kq,Y=H.bL,q=H.l9;function X(e){let{className:t,sideOffset:l=4,...a}=e;return(0,s.jsx)(H.ZL,{children:(0,s.jsx)(H.UC,{className:U("fade-in-0 zoom-in-95 data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 origin-[--radix-tooltip-content-transform-origin] animate-in overflow-hidden rounded-md bg-primary px-3 py-1.5 text-primary-foreground text-xs data-[state=closed]:animate-out",t),"data-slot":"tooltip-content",sideOffset:l,...a})})}let Q=e=>{let{className:t,children:l,...a}=e;return(0,s.jsx)("div",{className:U("flex items-center gap-1",t),...a,children:l})},$=e=>{let{tooltip:t,children:l,label:a,className:n,variant:r="ghost",size:i="sm",...o}=e,c=(0,s.jsxs)(W,{className:U("size-9 p-1.5 text-muted-foreground hover:text-foreground",n),size:i,type:"button",variant:r,...o,children:[l,(0,s.jsx)("span",{className:"sr-only",children:a||t})]});return t?(0,s.jsx)(K,{children:(0,s.jsxs)(Y,{children:[(0,s.jsx)(q,{asChild:!0,children:c}),(0,s.jsx)(X,{children:(0,s.jsx)("p",{children:t})})]})}):c};var Z=l(15171),ee=l(22029);let et=e=>{let{className:t,...l}=e;return(0,s.jsx)(ee.z,{className:U("relative flex-1 overflow-y-auto",t),initial:"smooth",resize:"smooth",role:"log",...l})},el=e=>{let{className:t,...l}=e;return(0,s.jsx)(ee.z.Content,{className:U("p-4",t),...l})},es=e=>{let{className:t,...l}=e,{isAtBottom:a,scrollToBottom:n}=(0,ee.B)(),i=(0,r.useCallback)(()=>{n()},[n]);return!a&&(0,s.jsx)(W,{className:U("absolute bottom-4 left-[50%] translate-x-[-50%] rounded-full",t),onClick:i,size:"icon",type:"button",variant:"outline",...l,children:(0,s.jsx)(Z.A,{className:"size-4"})})};var ea=l(15756),en=l(37345);let er=e=>{let{text:t,className:l,initiallyOpen:a=!0,title:n="Reasoning"}=e,[i,o]=(0,r.useState)(a);return t&&0!==t.trim().length?(0,s.jsxs)("div",{className:U("rounded-xl border border-border bg-background text-foreground shadow-sm",l),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-3 py-2",children:[(0,s.jsx)("div",{className:"font-medium text-sm opacity-80",children:n}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(W,{className:"h-7 px-2 text-muted-foreground hover:text-foreground",onClick:()=>o(e=>!e),size:"sm",variant:"ghost",children:i?(0,s.jsx)(ea.A,{className:"h-4 w-4"}):(0,s.jsx)(en.A,{className:"h-4 w-4"})})})]}),i&&(0,s.jsx)("div",{className:"px-3 pb-3",children:(0,s.jsx)("pre",{className:"whitespace-pre-wrap text-xs leading-5 opacity-90",children:t})})]}):null};var ei=l(21284);let eo=e=>{let{values:t,config_title:l,updateConfig:a,component_name:n,blocked:i}=e,[c,d]=(0,r.useState)(""),[x,u]=(0,r.useState)(t);(0,r.useEffect)(()=>{a(n,l,x)},[n,l,x,a]);let m=e=>{x.includes(e)||(u(t=>[...t,e]),d(""))};return(0,s.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,s.jsx)("label",{className:"input flex w-full items-center gap-2 bg-bg-verba",children:(0,s.jsx)("input",{className:"w-full grow",disabled:i,onChange:e=>{d(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),m(c))},type:"text",value:c})}),(0,s.jsxs)("button",{className:"btn flex gap-2 border-none bg-button-verba text-text-verba hover:bg-secondary-verba",disabled:i,onClick:()=>{m(c)},children:[(0,s.jsx)(f.g7W,{size:15}),(0,s.jsx)("p",{children:"Add"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2",children:t.map((e,t)=>(0,s.jsxs)("div",{className:"flex w-full items-center justify-between rounded-xl bg-bg-verba p-2 text-center text-sm text-text-verba",children:[(0,s.jsx)("div",{className:"flex w-full items-center justify-center overflow-hidden",children:(0,s.jsx)("p",{className:"truncate",title:e,children:e})}),(0,s.jsx)("button",{className:"btn btn-sm btn-square ml-2 border-none bg-button-verba text-text-verba hover:bg-warning-verba",disabled:i,onClick:()=>{(e=>{x.includes(e)&&u(t=>t.filter(t=>t!==e))})(e)},children:(0,s.jsx)(o.qbC,{size:12})})]},e+t))})]})},ec=e=>{var t,l,a,n,r,i,o,c,d,x,u,f;let{RAGConfig:g,component_name:p,selectComponent:b,updateConfig:h,saveComponentConfig:v,blocked:j,skip_component:w}=e;return(null==(t=g[p])?void 0:t.components)&&(null==(l=g[p])?void 0:l.selected)&&0===Object.entries((null==(a=g[p].components[g[p].selected])?void 0:a.config)||{}).length&&w?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)("div",{className:"flex w-full flex-col justify-start gap-3 rounded-2xl p-1",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"divider flex-grow text-text-alt-verba text-xs lg:text-sm",children:[(0,s.jsxs)("p",{children:[(null==(n=g[p])?void 0:n.selected)||"Unknown"," Settings"]}),(0,s.jsx)(m.A,{onClick:()=>{var e,t;if((null==(e=g[p])?void 0:e.selected)&&(null==(t=g[p])?void 0:t.components)){let e=g[p].components[g[p].selected];e&&v(p,g[p].selected,e)}},title:"Save"})]})}),!w&&(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw] text-sm lg:text-base",children:p}),(0,s.jsxs)("div",{className:"dropdown dropdown-bottom flex w-full items-center justify-start",children:[(0,s.jsxs)("button",{className:"btn flex w-full justify-start border-none bg-button-verba text-text-verba hover:bg-button-hover-verba",disabled:j,tabIndex:0,children:[(0,s.jsx)(ei.T6S,{size:15}),(0,s.jsx)("p",{children:(null==(r=g[p])?void 0:r.selected)||"None"})]}),(0,s.jsx)("ul",{className:"dropdown-content menu z-[1] w-full rounded-box bg-base-100 p-2 shadow",children:function(e){var t;return(null==(t=e[p])?void 0:t.components)?Object.entries(e[p].components).filter(e=>{let[,t]=e;return t.available}).map(e=>{let[,t]=e;return(0,s.jsx)("li",{onClick:()=>{j||(b(p,t.name),G())},children:(0,s.jsx)("a",{children:t.name})},"ComponentDropdown_".concat(t.name))}):[]}(g)})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-start text-text-alt-verba text-xs lg:text-sm",children:(null==(i=g[p])?void 0:i.selected)&&(null==(o=g[p])?void 0:o.components)&&(null==(c=g[p].components[g[p].selected])?void 0:c.description)||"No description"})]})]}),(null==(d=g[p])?void 0:d.selected)&&(null==(x=g[p])?void 0:x.components)&&(null==(u=g[p].components[g[p].selected])?void 0:u.config)?Object.entries((null==(f=g[p].components[g[p].selected])?void 0:f.config)||{}).map(e=>{let[t,l]=e;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3 text-sm text-text-verba lg:text-base",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:t}),"dropdown"===l.type&&(0,s.jsxs)("div",{className:"dropdown dropdown-bottom flex w-full items-center justify-start",children:[(0,s.jsxs)("button",{className:"btn flex w-full justify-start border-none bg-button-verba text-text-verba hover:bg-button-hover-verba",disabled:j,tabIndex:0,children:[(0,s.jsx)(ei.T6S,{size:15}),(0,s.jsx)("p",{children:l.value})]}),(0,s.jsx)("ul",{className:"dropdown-content menu z-[1] max-h-[20vh] w-full overflow-auto rounded-box bg-base-100 p-2 shadow",children:function(e,t){var l,a;let n=e[p];if(!(null==n?void 0:n.components)||!n.selected)return[];let r=n.components[n.selected];return(null==r||null==(a=r.config)||null==(l=a[t])?void 0:l.values)?r.config[t].values.map(e=>(0,s.jsx)("li",{className:"text-sm",onClick:()=>{j||(h(p,t,e),G())},children:(0,s.jsx)("a",{children:e})},"ConfigValue".concat(e))):[]}(g,t)})]}),"boolean"!=typeof l.value&&["text","number","password"].includes(l.type)&&(0,s.jsx)("label",{className:"input flex w-full items-center gap-2 bg-bg-verba text-sm",children:(0,s.jsx)("input",{className:"w-full grow",onChange:e=>{j||h(p,t,e.target.value)},type:l.type,value:l.value})}),"boolean"!=typeof l.value&&["textarea"].includes(l.type)&&(0,s.jsx)("textarea",{className:"min-h-[152px] w-full grow rounded-lg bg-bg-verba p-2 text-sm",onChange:e=>{j||h(p,t,e.target.value)},value:l.value}),"boolean"!=typeof l.value&&"multi"===l.type&&(0,s.jsx)(eo,{blocked:j,component_name:p,config_title:t,updateConfig:h,values:l.values}),"bool"===l.type&&(0,s.jsxs)("div",{className:"my-4 flex w-full items-center justify-start gap-5",children:[(0,s.jsx)("p",{className:"w-[250px] text-start text-text-alt-verba text-xs lg:text-sm",children:l.description}),(0,s.jsx)("input",{checked:"boolean"==typeof l.value&&l.value,className:"checkbox checkbox-md",onChange:e=>{j||h(p,t,e.target.checked)},type:"checkbox"})]})]}),"bool"!==l.type&&(0,s.jsxs)("div",{className:"mt-3 flex items-center gap-2 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-start text-text-alt-verba text-xs",children:l.description})]})]},"Configuration".concat(t).concat(p))}):[]]})},ed=e=>{let{RAGConfig:t,setRAGConfig:l,addStatusMessage:a,onSave:n,credentials:o,onReset:c,production:x}=e,u=(e,t,s)=>{l(l=>{if(null==l?void 0:l[e]){let n={...l},r=n[e];if((null==r?void 0:r.components)&&r.selected&&r.components[r.selected]){var a;let e=r.components[r.selected];(null==e||null==(a=e.config)?void 0:a[t])&&("string"==typeof s||"boolean"==typeof s?e.config[t].value=s:e.config[t].values=s)}return n}return l})},g=(e,t)=>{l(l=>{if(l){let s={...l};return s[e]&&(s[e].selected=t),s}return l})},p=(0,r.useCallback)(async(e,s,n)=>{if(!t)return;a("Saving ".concat(s," Config"),"SUCCESS");let r=JSON.parse(JSON.stringify(t));r[e].selected=s,r[e].components[s]=n,await (0,i.wz)(r,o)&&l(r)},[t,a,o,l]);return t?(0,s.jsxs)("div",{className:"flex w-full flex-col justify-start rounded-2xl p-4",children:[(0,s.jsx)("div",{className:"sticky top-0 z-20 flex w-full flex-col justify-end gap-2",children:(0,s.jsxs)("div",{className:"flex w-full justify-end gap-2 rounded-lg bg-bg-alt-verba p-4",children:[(0,s.jsx)(m.A,{disabled:"Demo"===x,Icon:f.yOD,onClick:n,title:"Save Config"}),(0,s.jsx)(m.A,{disabled:"Demo"===x,Icon:d.uDv,onClick:c,title:"Reset"})]})}),(0,s.jsxs)("div",{className:"flex w-full flex-col justify-start gap-3 rounded-2xl p-6",children:[(0,s.jsx)(ec,{blocked:"Demo"===x,component_name:"Embedder",RAGConfig:t,saveComponentConfig:p,selectComponent:g,updateConfig:u}),(0,s.jsx)(ec,{blocked:"Demo"===x,component_name:"Generator",RAGConfig:t,saveComponentConfig:p,selectComponent:g,updateConfig:u}),(0,s.jsx)(ec,{blocked:"Demo"===x,component_name:"Retriever",RAGConfig:t,saveComponentConfig:p,selectComponent:g,updateConfig:u})]})]}):(0,s.jsx)("div",{})},ex=e=>{let{message:t,selectedTheme:l,selectedDocument:a,setSelectedDocument:n,message_index:r,setSelectedDocumentScore:i,setSelectedChunkScore:c}=e;return"string"==typeof t.content?(0,s.jsx)("div",{className:"flex items-end gap-2 ".concat("user"===t.type?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:"flex animate-press-in flex-col items-start rounded-3xl p-5 text-sm lg:text-base ".concat({user:"bg-bg-verba",system:"bg-bg-alt-verba",error:"bg-warning-verba",retrieval:"bg-bg-verba"}[t.type]),children:[t.cached&&(0,s.jsx)(o.nBS,{className:"text-text-verba",size:12}),"system"===t.type&&(0,s.jsx)("div",{className:"prose md:prose-sm lg:prose-base prose-pre:bg-bg-alt-verba p-3",children:(0,s.jsx)(g.oz,{components:{code(e){let{inline:t,className:a,children:n,...r}=e,i=/language-(\w+)/.exec(a||"");return!t&&i?(0,s.jsx)(p.A,{language:i[1],PreTag:"div",style:"dark"===l.theme?b.bM:b.Je,...r,children:String(n).replace(/\n$/,"")}):(0,s.jsx)("code",{className:a,...r,children:n})}},children:t.content})}),"system"===t.type&&(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsxs)(Q,{children:[(0,s.jsx)($,{label:"Good",onClick:()=>E("message","up",{index:r}),tooltip:"Thumbs up",children:"\uD83D\uDC4D"}),(0,s.jsx)($,{label:"Bad",onClick:()=>E("message","down",{index:r}),tooltip:"Thumbs down",children:"\uD83D\uDC4E"})]})}),"user"===t.type&&(0,s.jsx)("div",{className:"whitespace-pre-wrap",children:t.content}),"error"===t.type&&(0,s.jsxs)("div",{className:"flex items-center gap-2 whitespace-pre-wrap text-sm text-text-verba",children:[(0,s.jsx)(_.U0v,{size:15}),(0,s.jsx)("p",{children:t.content})]})]})}):(0,s.jsxs)("div",{className:"grid w-full grid-cols-2 items-center gap-3 lg:grid-cols-3",children:[t.content.map((e,t)=>(0,s.jsx)("button",{className:"flex ".concat(a&&a===e.uuid+e.score+e.chunks.length?"bg-secondary-verba hover:bg-button-hover-verba":"bg-button-verba hover:bg-secondary-verba"," items-center justify-between rounded-3xl border-none p-3 transition-colors duration-300 ease-in-out"),onClick:()=>{n(e.uuid),i(e.uuid+e.score+e.chunks.length),c(e.chunks)},children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,s.jsx)("p",{className:"mr-2 flex-grow truncate text-xs",title:e.title,children:e.title}),(0,s.jsxs)("div",{className:"flex flex-shrink-0 items-center gap-1 text-text-verba",children:[(0,s.jsx)(f.ic6,{size:12}),(0,s.jsx)("p",{className:"text-sm",children:e.chunks.length})]})]})},"Retrieval".concat(e.title).concat(t))),(0,s.jsx)(m.A,{className:"btn-sm btn-square",Icon:f.HjD,onClick:()=>document.getElementById("context-modal-".concat(r)).showModal()}),(0,s.jsx)("dialog",{className:"modal",id:"context-modal-".concat(r),children:(0,s.jsxs)("div",{className:"modal-box",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:"Context"}),(0,s.jsx)("p",{className:"py-4",children:t.context}),(0,s.jsx)("div",{className:"modal-action",children:(0,s.jsx)("form",{method:"dialog",children:(0,s.jsx)("button",{className:"btn border-none bg-button-verba text-text-alt-verba shadow-none hover:bg-button-hover-verba hover:text-text-verba focus:outline-none",children:(0,s.jsx)("p",{children:"Close"})})})})]})})]})},eu=e=>{var t,l,a,n,g,p,b,h;let{production:v,credentials:j,setSelectedDocument:w,setSelectedChunkScore:N,currentPage:y,RAGConfig:C,selectedTheme:S,setRAGConfig:k,addStatusMessage:E,documentFilter:I,setDocumentFilter:R}=e,[D,O]=(0,r.useState)("Chat"),T=(0,r.useRef)(!1),[F,P]=(0,r.useState)("DONE"),[M,L]=(0,r.useState)(""),[G,z]=(0,r.useState)(""),[J,U]=(0,r.useState)(null),[B,V]=(0,r.useState)(!1),[W,H]=(0,r.useState)(!1),[K,Y]=(0,r.useState)([]),[q,X]=(0,r.useState)([]),[Z,ee]=(0,r.useState)([]),[ea,en]=(0,r.useState)(null),[ei,eo]=(0,r.useState)(0),[ec,eu]=(0,r.useState)(""),[em,ef]=(0,r.useState)([]),[eg,ep]=(0,r.useState)(!1),eb=String(null!=(h=null==C||null==(p=C.Embedder)||null==(g=p.components)||null==(a=g[null!=(b=null==(n=C.Embedder)?void 0:n.selected)?b:""])||null==(l=a.config)||null==(t=l.Model)?void 0:t.value)?h:"No Config found"),eh=(0,r.useCallback)(async()=>{try{let e=await (0,i.iX)(eb,I,j),t=await (0,i.wR)(j);e&&eo(e.datacount),t&&X(t.labels)}catch(e){E("Failed to fetch datacount: ".concat(e),"ERROR")}},[eb,I,j,E]);(0,r.useEffect)(()=>{H(!0)},[]),(0,r.useEffect)(()=>{C?eh():eo(0)},[C,eh]),(0,r.useEffect)(()=>{ef(e=>0===e.length?[{type:"system",content:S.intro_message.text}]:e)},[S.intro_message.text]),(0,r.useEffect)(()=>{let e=new WebSocket((()=>{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return"".concat(e,"//").concat(t,"/ws/generate_stream")})());return e.onopen=()=>{V(!0)},e.onmessage=e=>{let t;if(!T.current)return void L("");try{t=JSON.parse(e.data)}catch(e){return}let l=t.message||"";if(t.reasoning&&z(e=>e+t.reasoning),L(e=>e+l),"stop"===t.finish_reason){T.current=!1,P("DONE"),E("Finished generation","SUCCESS");let e=t.full_text||"";if(t.cached&&void 0!==t.distance){let l=String(t.distance);ef(t=>[...t,{type:"system",content:e,cached:!0,distance:l}])}else ef(t=>[...t,{type:"system",content:e}]);L("")}},e.onerror=e=>{V(!1),T.current=!1,P("DONE"),H(e=>!e)},e.onclose=e=>{e.wasClean,V(!1),T.current=!1,P("DONE"),H(e=>!e)},U(e),()=>{e.readyState!==WebSocket.CLOSED&&e.close()}},[E]),(0,r.useEffect)(()=>{C?eh():eo(0)},[C,eh]);let ev=async()=>{let e=await (0,i.XJ)(j);e?k(e.rag_config):E("Failed to fetch RAG Config","ERROR")},ej=async()=>{if(!T.current&&ec.trim()){eu(""),T.current=!0,Y([]),P("CHUNKS"),z(""),ef(e=>[...e,{type:"user",content:ec}]);try{E("Sending query...","INFO"),A("user_message",{message:ec}).catch(()=>{});let e=await (0,i.y)(ec,C,Z,I,j);!e||e.error?ew(e?e.error:"No data received"):(eN(e,ec),A("retrieval",{query:ec},{meta:e}).catch(()=>{}))}catch(e){ew("Failed to fetch from API")}}},ew=e=>{E("Query failed","ERROR"),ef(t=>[...t,{type:"error",content:e}]),T.current=!1,P("DONE")},eN=(e,t)=>{if(ef(t=>[...t,{type:"retrieval",content:e.documents,context:e.context}]),E("Received ".concat(Object.entries(e.documents).length," documents"),"SUCCESS"),e.documents.length>0){let l=e.documents[0];l?(w(l.uuid),en("".concat(l.uuid).concat(l.score).concat(l.chunks.length)),N(l.chunks),e.context&&(ey(t,e.context),P("RESPONSE"))):ew("Document array is unexpectedly empty")}else ew("We couldn't find any chunks to your query")},ey=(e,t)=>{if((null==J?void 0:J.readyState)===WebSocket.OPEN){let l=JSON.stringify({query:e,context:t,conversation:em.slice(1).filter(e=>"user"===e.type||"system"===e.type).map(e=>({type:e.type,content:e.content})),rag_config:C});J.send(l)}},e_=async()=>{E("Saved Config","SUCCESS"),await (0,i.wz)(C,j)},eC=async()=>{E("Reset Config","WARNING"),ev()},eS=async()=>{var e,t,l,s,a;if(null==C||null==(a=C.Retriever)||null==(s=a.components)||null==(l=s[C.Retriever.selected])||null==(t=l.config)||null==(e=t.Suggestion)?void 0:e.value){let e=await (0,i._E)(ec,3,j);e&&Y(e.suggestions)}};return(0,s.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex h-min w-full items-center justify-between gap-2 rounded-2xl bg-bg-alt-verba p-3",children:[(0,s.jsx)("div",{className:"hidden items-center justify-start gap-2 md:flex",children:(0,s.jsx)(u,{display_text:"Chat",tooltip_text:"Use the Chat interface to interact with your data and perform Retrieval Augmented Generation (RAG). This interface allows you to ask questions, analyze sources, and generate responses based on your stored documents."})}),(0,s.jsxs)("div",{className:"flex w-full items-center justify-end gap-3 md:w-fit",children:[(0,s.jsx)(m.A,{disabled:!1,Icon:f.lhM,onClick:()=>{O("Chat")},selected:"Chat"===D,selected_color:"bg-secondary-verba",title:"Chat"}),"Demo"!==v&&(0,s.jsx)(m.A,{disabled:!1,Icon:o.Kni,onClick:()=>{O("Config")},selected:"Config"===D,selected_color:"bg-secondary-verba",title:"Config"})]})]}),(0,s.jsxs)("div",{className:"relative flex h-[50vh] w-full flex-col overflow-y-auto overflow-x-hidden rounded-2xl bg-bg-alt-verba md:h-full",children:["Chat"===D&&(0,s.jsxs)("div",{className:"sticky top-0 z-9 flex flex-col gap-2 rounded-lg bg-bg-alt-verba bg-opacity-30 p-4 backdrop-blur-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-start gap-2",children:[(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,s.jsx)("label",{children:(0,s.jsx)(m.A,{className:"btn-sm min-w-min",disabled:!1,Icon:c.j8n,icon_size:12,selected:!1,text_class_name:"text-xs",title:"Label"})}),(0,s.jsx)("ul",{className:"dropdown-content menu z-[1] w-52 rounded-box bg-base-100 p-2 shadow",children:q.map((e,t)=>(0,s.jsx)("li",{children:(0,s.jsx)("a",{onClick:()=>{Z.includes(e)||ee([...Z,e]);let t=document.activeElement;t.blur();let l=t.closest(".dropdown");l&&l.blur()},children:e})},"Label".concat(t)))})]})}),(Z.length>0||I.length>0)&&(0,s.jsx)(m.A,{className:"btn-sm max-w-min",disabled:!1,Icon:d.uDv,icon_size:12,onClick:()=>{ee([]),R([])},selected:!1,text_class_name:"text-xs",title:"Clear"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[Z.map((e,t)=>(0,s.jsx)(m.A,{className:"btn-sm min-w-min max-w-[200px]",Icon:d.uDv,icon_size:12,onClick:()=>{ee(Z.filter(t=>t!==e))},selected:!0,selected_color:"bg-primary-verba",text_class_name:"truncate max-w-[200px]",text_size:"text-xs",title:e},"FilterLabel".concat(t))),I.map((e,t)=>(0,s.jsx)(m.A,{className:"btn-sm min-w-min max-w-[200px]",Icon:d.uDv,icon_size:12,onClick:()=>{R(I.filter(t=>t.uuid!==e.uuid))},selected:!0,selected_color:"bg-secondary-verba",text_class_name:"truncate md:max-w-[100px] lg:max-w-[150px]",text_size:"text-xs",title:e.title},"DocumentFilter".concat(t)))]})]}),(0,s.jsxs)("div",{className:"".concat("Chat"===D?"":"hidden"),children:[(0,s.jsxs)(et,{className:"flex flex-col gap-3 p-4",children:[(0,s.jsxs)(el,{children:[(0,s.jsxs)("div",{className:"flex w-full items-center justify-start gap-2 text-text-alt-verba",children:[0===ei&&(0,s.jsx)(_.U0v,{size:15}),0===ei&&(0,s.jsx)("p",{className:"flex items-center text-sm text-text-alt-verba",children:"".concat(ei," documents embedded by ").concat(eb)})]}),(0,s.jsx)("div",{className:"py-1",children:(0,s.jsx)(er,{text:G})}),em.map((e,t)=>(0,s.jsx)("div",{className:"".concat("user"===e.type?"text-right":""),children:(0,s.jsx)(ex,{message:e,message_index:t,selectedDocument:ea,selectedTheme:S,setSelectedChunkScore:N,setSelectedDocument:w,setSelectedDocumentScore:en})},"Message_".concat(t))),M&&(0,s.jsx)(ex,{message:{type:"system",content:M,cached:!1},message_index:-1,selectedDocument:ea,selectedTheme:S,setSelectedChunkScore:N,setSelectedDocument:w,setSelectedDocumentScore:en})]}),(0,s.jsx)(es,{})]}),(0,s.jsx)("div",{className:"px-4 pb-2",children:(0,s.jsxs)(Q,{children:[(0,s.jsx)($,{label:"Copy",onClick:()=>{let e=[...em].reverse().find(e=>"user"!==e.type);e&&"string"==typeof e.content&&navigator.clipboard.writeText(e.content)},tooltip:"Copy last response",children:"⧉"}),(0,s.jsx)($,{label:"Clear",onClick:()=>ef(em.slice(0,1)),tooltip:"Clear conversation",children:"✕"})]})}),T.current&&(0,s.jsx)("div",{className:"flex flex-col gap-2 px-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"loading loading-dots loading-md text-text-alt-verba"}),(0,s.jsxs)("p",{className:"text-text-alt-verba",children:["CHUNKS"===F&&"Retrieving...","RESPONSE"===F&&"Generating..."]}),(0,s.jsx)("button",{className:"btn btn-circle btn-sm border-none bg-bg-alt-verba text-sm text-text-alt-verba shadow-none hover:bg-warning-verba hover:text-text-verba",onClick:()=>{P("DONE"),T.current=!1},children:(0,s.jsx)(d.uDv,{size:15})})]})})]}),"Config"===D&&(0,s.jsx)(ed,{addStatusMessage:E,credentials:j,onReset:eC,onSave:e_,production:v,RAGConfig:C,setRAGConfig:k})]}),(0,s.jsx)("div",{className:"flex h-min w-full items-center justify-end gap-2 rounded-2xl bg-bg-alt-verba p-6",children:B?(0,s.jsxs)("div",{className:"relative flex w-full items-center justify-end gap-2",children:[(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)("textarea",{className:"textarea textarea-bordered min-h max-h-[150px] min-h-[40px] w-full overflow-y-auto bg-bg-verba placeholder-text-alt-verb",onChange:e=>{let t=e.target.value;eu(t),(t.length-1)%3==0&&eS()},onCompositionEnd:()=>{ep(!1)},onCompositionStart:()=>{ep(!0)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||eg||(e.preventDefault(),ej())},placeholder:ei>0?ei>=100?"Chatting with more than 100 documents...":"Chatting with ".concat(ei," documents..."):"No documents detected...",value:ec}),K.length>0&&(0,s.jsx)("ul",{className:"absolute top-full left-0 z-10 mt-2 flex max-h-40 w-full justify-between gap-2 overflow-y-auto",children:K.map((e,t)=>(0,s.jsx)("li",{className:"w-full cursor-pointer rounded-xl bg-button-verba p-3 text-text-alt-verba hover:bg-secondary-verba hover:text-text-verba",onClick:()=>{eu(e.query),Y([])},children:(0,s.jsx)("p",{className:"text-xs lg:text-sm",children:e.query.length>50?"".concat(e.query.substring(0,50),"..."):e.query.split(RegExp("(".concat(ec,")"),"gi")).map((e,t)=>e.toLowerCase()===ec.toLowerCase()?(0,s.jsx)("strong",{children:e},t):e)})},t))})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1",children:[(0,s.jsx)(m.A,{disabled:!1,Icon:c.sfP,onClick:()=>{ej()},selected_color:"bg-primary-verba",type:"button"}),(0,s.jsx)(m.A,{disabled:!1,Icon:d.vrP,onClick:()=>{w(null),N([]),eu(""),en(null),Y([]),ef([{type:"system",content:S.intro_message.text}])},selected_color:"bg-primary-verba",type:"button"})]})]}):(0,s.jsx)("div",{className:"flex w-full items-center justify-end gap-2",children:(0,s.jsxs)("button",{className:"btn flex items-center gap-2 border-none bg-button-verba text-text-verba hover:bg-button-hover-verba",onClick:()=>{H(e=>!e)},children:[(0,s.jsx)(x.mDV,{size:15}),(0,s.jsx)("p",{children:"Reconnecting..."}),(0,s.jsx)("span",{className:"loading loading-spinner loading-xs"})]})})})]})},em=e=>{let{credentials:t,selectedTheme:l,addStatusMessage:a,production:n,currentPage:i,RAGConfig:o,setRAGConfig:c,documentFilter:d,setDocumentFilter:x}=e,[u,m]=(0,r.useState)(null),[f,g]=(0,r.useState)([]);return(0,s.jsxs)("div",{className:"flex h-[50vh] flex-col justify-center gap-3 md:h-[80vh] md:flex-row",children:[(0,s.jsx)("div",{className:"".concat(u?"hidden md:flex md:w-[45vw]":"w-full md:flex md:w-[45vw]"),children:(0,s.jsx)(eu,{addStatusMessage:a,credentials:t,currentPage:i,documentFilter:d,production:n,RAGConfig:o,selectedTheme:l,setDocumentFilter:x,setRAGConfig:c,setSelectedChunkScore:g,setSelectedDocument:m})}),(0,s.jsx)("div",{className:"".concat(u?"flex w-full md:w-[55vw]":"hidden md:flex md:w-[55vw]"),children:(0,s.jsx)(y,{addStatusMessage:a,chunkScores:f,credentials:t,documentFilter:d,production:n,selectedDocument:u,selectedTheme:l,setDocumentFilter:x,setSelectedDocument:m})})]})},ef=e=>{let{title:t,modal_id:l,text:a,triggerAccept:n,triggerString:r,triggerValue:i}=e;return(0,s.jsx)("dialog",{className:"modal",id:l,children:(0,s.jsxs)("div",{className:"modal-box flex flex-col gap-2",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:t}),(0,s.jsx)("p",{className:"whitespace-pre-wrap",children:a}),(0,s.jsx)("div",{className:"modal-action",children:(0,s.jsxs)("form",{className:"flex gap-2",method:"dialog",children:[n&&r&&(0,s.jsx)(m.A,{onClick:()=>{n(i)},title:r,type:"submit"}),(0,s.jsx)(m.A,{selected:!0,selected_color:"bg-warning-verba",title:"Cancel",type:"submit"})]})})]})})},eg=e=>{let{selectedDocument:t,setSelectedDocument:l,production:a,addStatusMessage:n,credentials:x}=e,[f,g]=(0,r.useState)(""),[p,b]=(0,r.useState)(1),[h,v]=(0,r.useState)([]),[j,w]=(0,r.useState)(0),[N,y]=(0,r.useState)([]),[_,C]=(0,r.useState)([]),[S,k]=(0,r.useState)(!1),[A,E]=(0,r.useState)(!1),I=(0,r.useCallback)(async e=>{try{E(!0);let t=await (0,i.Yu)(e||"",_,p,50,x);t&&(""!==t.error?(E(!1),v(null),w(0)):(v(t.documents),y(t.labels),E(!1),w(t.totalDocuments)))}catch(e){E(!1)}},[_,p,50,x]);(0,r.useEffect)(()=>{k(!0)},[]),(0,r.useEffect)(()=>{I(f)},[I,f]);let R=()=>{I(f)},D=async e=>{if("Demo"===a||"string"!=typeof e)return;let s=await (0,i.Nn)(e,x);n("Deleted document","WARNING"),s&&(e===t&&l(null),I(f))};return(0,s.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex h-min w-full items-center justify-between gap-2 rounded-2xl bg-bg-alt-verba p-3",children:[(0,s.jsx)("div",{className:"hidden w-[8vw] justify-start gap-2 lg:flex",children:(0,s.jsx)(u,{display_text:"Search",tooltip_text:"Search and inspect different documents imported into Verba"})}),(0,s.jsx)("label",{className:"input flex w-full items-center gap-2 bg-bg-verba",children:(0,s.jsx)("input",{className:"w-full grow",onChange:e=>{g(e.target.value)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),R())},placeholder:"Search for documents (".concat(j,")"),type:"text",value:f})}),(0,s.jsx)(m.A,{Icon:o.KSO,onClick:R}),(0,s.jsx)(m.A,{Icon:d.vrP,icon_size:20,onClick:()=>{g(""),C([]),I("")}})]}),(0,s.jsxs)("div",{className:"flex h-full w-full flex-col items-center gap-3 overflow-auto rounded-2xl bg-bg-alt-verba p-6",children:[(0,s.jsxs)("div",{className:"flex w-full flex-col justify-start gap-2",children:[(0,s.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,s.jsx)("label",{children:(0,s.jsx)(m.A,{className:"btn-sm min-w-min",disabled:!1,Icon:c.j8n,icon_size:12,selected:!1,text_class_name:"text-xs",title:"Label"})}),(0,s.jsx)("ul",{className:"dropdown-content menu z-[1] w-52 rounded-box bg-base-100 p-2 shadow",children:N.map((e,t)=>(0,s.jsx)("li",{children:(0,s.jsx)("a",{onClick:()=>{_.includes(e)||C([..._,e]);let t=document.activeElement;t.blur();let l=t.closest(".dropdown");l&&l.blur()},children:e})},"Label".concat(t)))})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:_.map((e,t)=>(0,s.jsx)(m.A,{className:"btn-sm min-w-min max-w-[200px]",Icon:d.uDv,icon_size:12,onClick:()=>{C(t=>t.filter(t=>t!==e))},selected:!0,selected_color:"bg-primary-verba",text_class_name:"truncate max-w-[200px]",text_size:"text-xs",title:e},"FilterDocumentLabel".concat(t)))})]}),A&&(0,s.jsx)("div",{className:"flex items-center justify-center gap-2",children:(0,s.jsx)("span",{className:"loading loading-spinner loading-sm text-text-alt-verba"})}),(0,s.jsxs)("div",{className:"flex w-full flex-col",children:[null==h?void 0:h.map((e,n)=>(0,s.jsxs)("div",{className:"flex w-full items-center justify-between gap-2 rounded-2xl p-1",children:[(0,s.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[(0,s.jsx)(m.A,{className:"flex-grow",onClick:()=>l(e.uuid),selected:t===e.uuid,selected_color:"bg-secondary-verba",text_class_name:"truncate max-w-[150px] lg:max-w-[350px]",title:e.title},e.title+n),"Demo"!==a&&(0,s.jsx)(m.A,{className:"max-w-min",Icon:o.qbC,onClick:()=>{(e=>{let t=document.getElementById(e);t instanceof HTMLDialogElement&&t.showModal()})("remove_document".concat(e.uuid))},selected:t===e.uuid,selected_color:"bg-warning-verba"},"".concat(e.title+n,"delete"))]}),(0,s.jsx)(ef,{modal_id:"remove_document".concat(e.uuid),text:"Do you want to remove ".concat(e.title,"?"),title:"Remove Document",triggerAccept:e=>{"string"==typeof e&&D(e)},triggerString:"Delete",triggerValue:e.uuid})]},"Document".concat(n).concat(e.title)))," "]})]}),(0,s.jsx)("div",{className:"flex h-min w-full items-center justify-center gap-2 rounded-2xl bg-bg-alt-verba p-4",children:(0,s.jsx)("div",{className:"join items-center justify-center text-text-verba",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 bg-bg-alt-verba",children:[(0,s.jsx)(m.A,{className:"btn-sm min-w-min max-w-[200px]",Icon:o.vpL,onClick:()=>{h&&(1===p?b(Math.ceil(j/50)):b(e=>e-1))},text_class_name:"text-xs",title:"Previous Page"}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("p",{className:"text-text-verba text-xs",children:["Page ",p]})}),(0,s.jsx)(m.A,{className:"btn-sm min-w-min max-w-[200px]",Icon:o.QyA,onClick:()=>{h&&(50*p<j?b(e=>e+1):b(1))},text_class_name:"text-xs",title:"Next Page"})]})})})]})},ep=e=>{let{selectedTheme:t,production:l,credentials:a,documentFilter:n,setDocumentFilter:i,addStatusMessage:o}=e,[c,d]=(0,r.useState)(null);return(0,s.jsxs)("div",{className:"flex h-[80vh] justify-center gap-3",children:[(0,s.jsx)("div",{className:"".concat(c?"hidden md:flex md:w-[45vw]":"w-full md:flex md:w-[45vw]"),children:(0,s.jsx)(eg,{addStatusMessage:o,credentials:a,production:l,selectedDocument:c,setSelectedDocument:d})}),(0,s.jsx)("div",{className:"".concat(c?"flex w-full md:w-[55vw]":"hidden md:flex md:w-[55vw]"),children:(0,s.jsx)(y,{addStatusMessage:o,credentials:a,documentFilter:n,production:l,selectedDocument:c,selectedTheme:t,setDocumentFilter:i,setSelectedDocument:d})})]})};var eb=l(20318),eh=l(2800);let ev={DONE:"bg-secondary-verba",ERROR:"bg-warning-verba",READY:"bg-button-verba",STARTING:"bg-button-verba",CHUNKING:"bg-button-verba",LOADING:"bg-button-verba",EMBEDDING:"bg-button-verba",INGESTING:"bg-button-verba",NER:"bg-button-verba",EXTRACTION:"bg-button-verba",SUMMARIZING:"bg-button-verba",WAITING:"bg-button-verba"},ej={DONE:"Finished",ERROR:"Failed",READY:"Ready",STARTING:"Importing...",CHUNKING:"Chunking...",LOADING:"Loading...",EMBEDDING:"Embedding...",INGESTING:"Weaviating...",NER:"Extracting NER...",EXTRACTION:"Extraction REL...",SUMMARIZING:"Summarizing...",WAITING:"Uploading..."},ew={theme_name:"Light",title:{text:"Verba",type:"text",description:"Title"},subtitle:{text:"The Golden RAGtriever",type:"text",description:"Subtitle"},intro_message:{text:"Welcome to Verba, your open-source RAG application!",type:"text",description:"First Message"},image:{src:"https://github.com/weaviate/Verba/blob/main/img/verba_icon.png?raw=true",type:"image",description:"Logo"},primary_color:{color:"#FDFF91",type:"color",description:"Primary"},secondary_color:{color:"#90FFA8",type:"color",description:"Secondary"},warning_color:{color:"#FF8399",type:"color",description:"Warning"},bg_color:{color:"#FEF7F7",type:"color",description:"Background"},bg_alt_color:{color:"#FFFFFF",type:"color",description:"Alt. Background"},text_color:{color:"#161616",type:"color",description:"Text"},text_alt_color:{color:"#8E8E8E",type:"color",description:"Alt. Text"},button_text_color:{color:"#161616",type:"color",description:"Button Text"},button_text_alt_color:{color:"#8E8E8E",type:"color",description:"Button Alt. Text"},button_color:{color:"#EFEFEF",type:"color",description:"Button"},button_hover_color:{color:"#DCDCDC",type:"color",description:"Button Hover"},font:{value:"Plus_Jakarta_Sans",type:"select",options:["Inter","Plus_Jakarta_Sans","Open_Sans","PT_Mono"],description:"Text Font"},theme:"light"},eN={...ew,theme_name:"Dark",title:{...ew.title,text:"Verba"},subtitle:{...ew.subtitle,text:"The Dark RAGtriever"},intro_message:{...ew.intro_message,text:"Welcome to Verba, your open-source RAG application!"},image:{...ew.image,src:"https://github.com/weaviate/Verba/blob/main/img/verba_icon.png?raw=true"},primary_color:{...ew.primary_color,color:"#BB86FC"},secondary_color:{...ew.secondary_color,color:"#008F82"},warning_color:{...ew.warning_color,color:"#FF8399"},bg_color:{...ew.bg_color,color:"#202020"},bg_alt_color:{...ew.bg_alt_color,color:"#2F2929"},text_color:{...ew.text_color,color:"#ffffff"},text_alt_color:{...ew.text_alt_color,color:"#999999"},button_text_color:{...ew.button_text_color,color:"#ffffff"},button_text_alt_color:{...ew.button_text_alt_color,color:"#999999"},button_color:{...ew.button_color,color:"#3C3C3C"},button_hover_color:{...ew.button_hover_color,color:"#2C2C2C"},font:{...ew.font,value:"Open_Sans"},theme:"dark"},ey={...ew,theme_name:"WCD",title:{...ew.title,text:"Verba"},subtitle:{...ew.subtitle,text:"Weaviate Chatbot"},intro_message:{...ew.intro_message,text:"Welcome to Verba, your open-source RAG application!"},image:{...ew.image,src:"https://github.com/weaviate/Verba/blob/1.0.0/frontend/public/weaviate.png?raw=true"},primary_color:{...ew.primary_color,color:"#BF40C5"},secondary_color:{...ew.secondary_color,color:"#28395B"},warning_color:{...ew.warning_color,color:"#EA3A31"},bg_color:{...ew.bg_color,color:"#0C1428"},bg_alt_color:{...ew.bg_alt_color,color:"#192136"},text_color:{...ew.text_color,color:"#ffffff"},text_alt_color:{...ew.text_alt_color,color:"#AAAAAA"},button_text_color:{...ew.button_text_color,color:"#ffffff"},button_text_alt_color:{...ew.button_text_alt_color,color:"#AAAAAA"},button_color:{...ew.button_color,color:"#1D253A"},button_hover_color:{...ew.button_hover_color,color:"#313749"},font:{...ew.font,value:"Open_Sans"},theme:"dark"},e_={...ew,theme_name:"Weaviate",title:{...ew.title,text:"Verba"},subtitle:{...ew.subtitle,text:"Weaviate Chatbot"},intro_message:{...ew.intro_message,text:"Welcome to Verba, your open-source RAG application!"},image:{...ew.image,src:"https://github.com/weaviate/Verba/blob/1.0.0/frontend/public/weaviate.png?raw=true"},primary_color:{...ew.primary_color,color:"#9bfc88"},secondary_color:{...ew.secondary_color,color:"#8bffe7"},warning_color:{...ew.warning_color,color:"#f77579"},bg_color:{...ew.bg_color,color:"#FEF7F7"},bg_alt_color:{...ew.bg_alt_color,color:"#ffffff"},text_color:{...ew.text_color,color:"#130C49"},text_alt_color:{...ew.text_alt_color,color:"#929292"},button_text_color:{...ew.button_text_color,color:"#130C49"},button_text_alt_color:{...ew.button_text_alt_color,color:"#929292"},button_color:{...ew.button_color,color:"#eeeeee"},button_hover_color:{...ew.button_hover_color,color:"#7dfffb"},font:{...ew.font,value:"Plus_Jakarta_Sans"},theme:"light"},eC=e=>{let{selectedFileData:t,fileMap:l,selectComponent:a,updateConfig:n,saveComponentConfig:i,setFileMap:c,blocked:x}=e,[u,g]=(0,r.useState)(""),[p,b]=(0,r.useState)(""),[h,v]=(0,r.useState)(""),[j,w]=(0,r.useState)("");(0,r.useEffect)(()=>{t&&l[t]&&(g(l[t].filename),b(l[t].source),v(l[t].metadata))},[l,t]);let N=(0,r.useCallback)((e,s)=>{if(t){let a=JSON.parse(JSON.stringify(l[t]));a[e]=s;let n={...l};n[t]=a,c(n)}},[t,l,c]),y=(0,r.useCallback)(e=>{let t=e.target.value;g(t),N("filename",t)},[N]),_=(0,r.useCallback)(e=>{let t=e.target.value;b(t),N("source",t)},[N]),C=(0,r.useCallback)(e=>{let t=e.target.value;v(t),N("metadata",t)},[N]),S=e=>{if(t&&l[t]&&!l[t].labels.includes(e)&&e.length>0){let s=JSON.parse(JSON.stringify(l[t]));s.labels.push(e);let a={...l};a[t]=s,c(a),w("")}};if(t){var k,A,E,I,R,D,O,T,F,P,M,L,G,z,J,U,B,V,W,H,K,Y,q,X,Q,$,Z,ee,et,el,es,ea,en,er,ei,eo,ed,ex,eu,em,ef,eg,ep,eb,ew,eN,ey;return(0,s.jsxs)("div",{className:"flex w-full flex-col justify-start gap-3 rounded-2xl p-1",children:[t&&l[t]&&"READY"!==l[t].status&&(0,s.jsx)("div",{className:"divider text-text-alt-verba",children:"Import Status"}),(0,s.jsx)("div",{className:"flex flex-col gap-3 text-text-verba",children:t&&l[t]&&Object.entries(l[t].status_report).map(e=>{let[t,l]=e;return(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsxs)("p",{className:"flex min-w-[8vw] items-center gap-2 text-text-verba",children:["DONE"===l.status&&(0,s.jsx)(o.A7C,{size:15}),"ERROR"===l.status&&(0,s.jsx)(d._Jm,{size:15}),ej[l.status]]}),(0,s.jsx)("label",{className:"input flex w-full items-center gap-2 ".concat(ev[l.status]," bg-bg-verba"),children:(0,s.jsx)("input",{className:"w-full grow",disabled:!0,type:"text",value:0!==l.took?l.message+" ("+l.took+"s)":l.message})})]},"Status".concat(t))})}),(0,s.jsx)(ec,{blocked:null!=(ex=null==(k=l[t])?void 0:k.block)&&ex,component_name:"Reader",RAGConfig:null!=(eu=null==(A=l[t])?void 0:A.rag_config)?eu:{},saveComponentConfig:i,selectComponent:a,skip_component:!0,updateConfig:n}),(0,s.jsx)("div",{className:"divider text-text-alt-verba",children:"File Settings"}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Title"}),(0,s.jsx)("label",{className:"input flex w-full items-center gap-2 bg-bg-verba",children:(0,s.jsx)("input",{className:"w-full grow",disabled:x,onChange:y,type:"text",value:u})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-start text-sm text-text-alt-verba",children:"Add a Title to the document. If you are adding a URL, all URL will have a have their corresponding URL as filename."})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Source Link"}),(0,s.jsx)("label",{className:"input flex w-full items-center gap-2 bg-bg-verba",children:(0,s.jsx)("input",{className:"w-full grow",disabled:x,onChange:_,type:"text",value:p})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-start text-sm text-text-alt-verba",children:"Add a link to reference the original source of the document. You can access it through the Document Explorer via the View Source button"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Labels"}),(0,s.jsx)("label",{className:"input flex w-full items-center gap-2 bg-bg-verba",children:(0,s.jsx)("input",{className:"w-full grow",disabled:x,onChange:e=>{w(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),S(j))},title:j,type:"text",value:j})}),(0,s.jsx)(m.A,{disabled:null!=x&&x,Icon:f.g7W,onClick:()=>{S(j)},title:"Add"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-start text-sm text-text-alt-verba",children:"Add or remove labels for Document Filtering"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:l[t]?function(e){return Object.entries(e.labels).map(a=>{let[n,r]=a;return(0,s.jsx)("div",{children:(0,s.jsx)(m.A,{className:"btn-sm",Icon:d.uDv,onClick:()=>{if(t&&l[t]&&l[t].labels.includes(r)&&r.length>0){let e=JSON.parse(JSON.stringify(l[t]));e.labels=e.labels.filter(e=>e!==r);let s={...l};s[t]=e,c(s),w("")}},text_class_name:"text-xs",title:r})},e.fileID+n+r)})}(l[t]):null})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Overwrite"}),(0,s.jsx)("input",{checked:!!t&&!!l[t]&&l[t].overwrite,className:"checkbox checkbox-md",disabled:x,onChange:e=>(e=>{if(t){let s=JSON.parse(JSON.stringify(l[t]));s.overwrite=e;let a={...l};a[t]=s,c(a)}})(e.target.checked),type:"checkbox"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-start text-sm text-text-alt-verba",children:"Overwrite existing documents with the same name."})]}),(0,s.jsx)("div",{className:"divider text-text-alt-verba",children:"Metadata"}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Metadata"}),(0,s.jsx)("textarea",{className:"textarea flex max-h-64 w-full grow items-center gap-2 bg-bg-verba",disabled:x,onChange:C,value:h})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-start text-sm text-text-alt-verba",children:"Add metadata to the document to improve retrieval and generation. Metadata will added to the context sent to the embedding and generation, to influcence the results."})]}),(0,s.jsx)("div",{className:"divider text-text-alt-verba",children:"File Information"}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Extension"}),(0,s.jsx)("label",{className:"input flex w-full items-center gap-2 bg-bg-verba",children:(0,s.jsx)("input",{className:"w-full grow",disabled:!0,type:"text",value:null!=(em=null==(E=l[t])?void 0:E.extension)?em:""})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"File Size"}),(0,s.jsx)("label",{className:"input flex w-full items-center gap-2 bg-bg-verba",children:(0,s.jsx)("input",{className:"w-full grow",disabled:!0,type:"text",value:(e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat((e/1024**t).toFixed(2)," ").concat(["B","KB","MB","GB","TB"][t])})(null!=(ef=null==(I=l[t])?void 0:I.file_size)?ef:0)})})]}),(0,s.jsx)("div",{className:"divider text-text-alt-verba",children:"Ingestion Pipeline"}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Reader"}),(0,s.jsx)("label",{className:"input flex w-full items-center gap-2 bg-bg-verba",children:(0,s.jsx)("input",{className:"w-full grow",disabled:!0,type:"text",value:null!=(eg=null==(O=l[t])||null==(D=O.rag_config)||null==(R=D.Reader)?void 0:R.selected)?eg:""})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-start text-sm text-text-alt-verba",children:t&&(null==(J=l[t])||null==(z=J.rag_config)||null==(G=z.Reader)||null==(L=G.components)||null==(T=L[null!=(ep=null==(M=l[t])||null==(P=M.rag_config)||null==(F=P.Reader)?void 0:F.selected)?ep:""])?void 0:T.description)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Chunker"}),(0,s.jsx)("label",{className:"input flex w-full items-center gap-2 bg-bg-verba",children:(0,s.jsx)("input",{className:"w-full grow",disabled:!0,type:"text",value:null!=(eb=null==(V=l[t])||null==(B=V.rag_config)||null==(U=B.Chunker)?void 0:U.selected)?eb:""})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-start text-sm text-text-alt-verba",children:t&&(null==($=l[t])||null==(Q=$.rag_config)||null==(X=Q.Chunker)||null==(q=X.components)||null==(W=q[null!=(ew=null==(Y=l[t])||null==(K=Y.rag_config)||null==(H=K.Chunker)?void 0:H.selected)?ew:""])?void 0:W.description)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Embedder"}),(0,s.jsx)("label",{className:"input flex w-full items-center gap-2 bg-bg-verba",children:(0,s.jsx)("input",{className:"w-full grow",disabled:!0,type:"text",value:null!=(eN=null==(et=l[t])||null==(ee=et.rag_config)||null==(Z=ee.Embedder)?void 0:Z.selected)?eN:""})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-start text-sm text-text-alt-verba",children:t&&(null==(ed=l[t])||null==(eo=ed.rag_config)||null==(ei=eo.Embedder)||null==(er=ei.components)||null==(el=er[null!=(ey=null==(en=l[t])||null==(ea=en.rag_config)||null==(es=ea.Embedder)?void 0:es.selected)?ey:""])?void 0:el.description)})]}),(0,s.jsx)("div",{className:"divider"}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Debug"}),(0,s.jsx)(m.A,{className:"max-w-min",Icon:eh.i7p,onClick:()=>{let e=document.getElementById("File_Debug_Modal");e instanceof HTMLDialogElement&&e.showModal()}})]}),(0,s.jsx)("dialog",{className:"modal",id:"File_Debug_Modal",children:(0,s.jsxs)("div",{className:"modal-box min-w-fit",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:"Debugging File Configuration"}),(0,s.jsx)("pre",{className:"whitespace-pre-wrap text-xs",children:t?(()=>{let e={...l[t]};return e.content="File Content",JSON.stringify(e,null,2)})():""}),(0,s.jsx)("div",{className:"modal-action",children:(0,s.jsx)("form",{method:"dialog",children:(0,s.jsx)("button",{className:"btn ml-2 border-none bg-warning-verba text-text-verba hover:bg-button-hover-verba",children:"Close"})})})]})})]})}return(0,s.jsx)("div",{})},eS=e=>{var t;let{selectedFileData:l,fileMap:a,addStatusMessage:n,setFileMap:c,RAGConfig:x,setRAGConfig:g,setSelectedFileData:p,credentials:b}=e,[h,v]=(0,r.useState)("Basic"),j=async()=>{n("Setting current config as default","SUCCESS"),l&&a[l]&&await (0,i.wz)(a[l].rag_config,b)&&g(a[l].rag_config)},w=(0,r.useCallback)((e,t,s)=>{c(a=>{if(l){var n,r;let i={...a},o=i[l];if(!o)return a;let c=null==(n=o.rag_config)?void 0:n[e];if(!c||!c.components||!c.selected)return a;let d=null==(r=c.components[c.selected])?void 0:r.config;if(!d)return a;let x=d[t];return x?("string"==typeof s||"boolean"==typeof s?x.value=s:x.values=s,i):a}return a})},[l,c]),N=(e,t)=>{c(s=>{if(l&&s[l]){let a=JSON.parse(JSON.stringify(s[l])),n=JSON.parse(JSON.stringify(s[l].rag_config));if(!n[e])return s;n[e].selected=t,a.rag_config=n;let r={...s};return r[l]=a,r}return s})},y=(0,r.useCallback)(async(e,t,l)=>{if(!x)return;n("Saving ".concat(t," config"),"SUCCESS");let s=JSON.parse(JSON.stringify(x));s[e].selected=t,s[e].components[t]=l,await (0,i.wz)(s,b)&&g(s)},[x,b,n,g]);return(0,s.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex h-min w-full items-center justify-between gap-2 rounded-2xl bg-bg-alt-verba p-6",children:[(0,s.jsx)("div",{className:"flex justify-start gap-2",children:(0,s.jsx)(u,{display_text:"Import Config",tooltip_text:"Configure all import settings related to chunking, embedding, adding meta data and more. You can save made changes individually or apply them to all other files"})}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)(m.A,{Icon:f.yOD,onClick:()=>{v("Basic")},selected:"Basic"===h,selected_color:"bg-secondary-verba",title:"Overview"}),(0,s.jsx)(m.A,{Icon:o.Kni,onClick:()=>{v("Pipeline")},selected:"Pipeline"===h,selected_color:"bg-secondary-verba",title:"Config"}),(0,s.jsx)(m.A,{Icon:d.uDv,onClick:()=>{p(null)}})]})]}),(0,s.jsxs)("div",{className:"flex h-full w-full flex-col items-center overflow-auto rounded-2xl bg-bg-alt-verba p-6",children:["Basic"===h&&(0,s.jsx)(eC,{addStatusMessage:n,blocked:l&&a[l]?null!=(t=a[l].block)&&t:void 0,fileMap:a,saveComponentConfig:y,selectComponent:N,selectedFileData:l,setFileMap:c,updateConfig:w}),"Pipeline"===h&&l&&a[l]&&(0,s.jsxs)("div",{className:"flex w-full flex-col gap-10",children:[(0,s.jsx)(ec,{blocked:a[l].block,component_name:"Chunker",RAGConfig:a[l].rag_config,saveComponentConfig:y,selectComponent:N,skip_component:!1,updateConfig:w}),(0,s.jsx)(ec,{blocked:a[l].block,component_name:"Embedder",RAGConfig:a[l].rag_config,saveComponentConfig:y,selectComponent:N,skip_component:!1,updateConfig:w})]})]}),(0,s.jsx)("div",{className:"flex h-min w-full items-center justify-end gap-2 rounded-2xl bg-bg-alt-verba p-6",children:(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)(m.A,{Icon:eb.jZm,onClick:()=>{let e=document.getElementById("apply_setting_to_all");e instanceof HTMLDialogElement&&e.showModal()},title:"Apply to All"}),(0,s.jsx)(m.A,{Icon:f.yOD,onClick:()=>{let e=document.getElementById("set_default_settings");e instanceof HTMLDialogElement&&e.showModal()},title:"Save Config"}),(0,s.jsx)(m.A,{Icon:d.uDv,onClick:()=>{let e=document.getElementById("reset_Setting");e instanceof HTMLDialogElement&&e.showModal()},title:"Reset"})]})}),(0,s.jsx)(ef,{modal_id:"apply_setting_to_all",text:"Apply Pipeline Settings to all files?",title:"Apply Pipeline Settings",triggerAccept:()=>{n("Applying config to all files","INFO"),c(e=>{if(l&&e[l]){let t=JSON.parse(JSON.stringify(e[l].rag_config)),s={...e};for(let a in e){let n=JSON.parse(JSON.stringify(e[a]));n.rag_config=t,n.source=e[l].source,n.labels=e[l].labels,n.overwrite=e[l].overwrite,s[a]=n}return s}return e})},triggerString:"Apply",triggerValue:null}),(0,s.jsx)(ef,{modal_id:"reset_Setting",text:"Reset pipeline settings of this file?",title:"Reset Setting",triggerAccept:()=>{n("Resetting pipeline settings","WARNING"),c(e=>{if(l&&x){let t={...e},s=JSON.parse(JSON.stringify(e[l]));return s.rag_config=x,t[l]=s,t}return e})},triggerString:"Reset",triggerValue:null}),(0,s.jsx)(ef,{modal_id:"set_default_settings",text:"Set current pipeline settings as default for future files?",title:"Set Default",triggerAccept:j,triggerString:"Set",triggerValue:null})]})},ek=e=>{var t;let{fileData:l,fileMap:a,handleDeleteFile:n,selectedFileData:r,setSelectedFileData:i}=e,c=a[l.fileID];return c?(0,s.jsxs)("div",{className:"flex w-full items-center gap-2",children:["READY"!==c.status?(0,s.jsxs)("div",{className:"flex gap-2",children:["DONE"!==c.status&&"ERROR"!==c.status&&(0,s.jsx)(m.A,{className:"w-[120px]",title:ej[c.status]}),"DONE"===c.status&&(0,s.jsx)(m.A,{className:"w-[120px]",Icon:o.A7C,selected:!0,selected_color:"bg-secondary-verba",title:ej[c.status]}),"ERROR"===c.status&&(0,s.jsx)(m.A,{className:"w-[120px]",Icon:d._Jm,selected:!0,selected_color:"bg-warning-verba",title:ej[c.status]})]}):(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)(m.A,{className:"w-[120px]",text_class_name:"truncate w-[100px]",title:(null==(t=c.rag_config.Reader)?void 0:t.selected)||"No Reader"})}),(0,s.jsx)(m.A,{className:"flex-grow",onClick:()=>{i(l.fileID)},selected:r===c.fileID,selected_color:"bg-secondary-verba",text_class_name:"truncate max-w-[150px] lg:max-w-[300px]",title:c.filename?c.filename:"No Filename"}),(0,s.jsx)(m.A,{className:"w-[50px]",Icon:o.qbC,onClick:()=>{let e=document.getElementById("remove_file_".concat(c.filename));e instanceof HTMLDialogElement&&e.showModal()},selected:r===c.fileID,selected_color:"bg-warning-verba"}),(0,s.jsx)(ef,{modal_id:"remove_file_".concat(c.filename),text:c.isURL?"Do you want to remove the URL?":"Do you want to remove "+c.filename+" from the selection?",title:"Remove File",triggerAccept:e=>n(e),triggerString:"Delete",triggerValue:c.fileID})]}):null},eA=e=>{let{fileMap:t,setFileMap:l,RAGConfig:a,addStatusMessage:n,selectedFileData:i,setSelectedFileData:f,importSelected:g,socketStatus:p,reconnect:b,importAll:h}=e,v=r.useRef(null);(0,r.useEffect)(()=>{null!==v.current&&(v.current.setAttribute("directory",""),v.current.setAttribute("webkitdirectory",""))},[]);let j=e=>{l(t=>{if(null===e)return n("Cleared all files","WARNING"),f(null),{};e===i&&f(null),n("Cleared selected file","WARNING");let l={...t};return delete l[e],l})},[w,N]=(0,r.useState)(null),[y,_]=(0,r.useState)(null),C=async(e,s)=>{if(e.target.files&&a){let r=e.target.files,i={...t},o=s?y:w;n("Added new files","SUCCESS");for(let e=0;e<r.length;e++){let t=r[e];if(!t)continue;let l=JSON.parse(JSON.stringify(a));o&&l.Reader&&(l.Reader.selected=o);let s=t.name,n=t.name;if(n in i){let e=Date.now();n="".concat(n,"_").concat(e)}let c=t.name.split(".").pop()||"",d=await function(e){return new Promise((t,l)=>{let s=new FileReader;s.onload=()=>{t(function(e){let t="",l=new Uint8Array(e),s=l.byteLength;for(let e=0;e<s;e++){let s=l[e];void 0!==s&&(t+=String.fromCharCode(s))}return btoa(t)}(s.result))},s.onerror=()=>l(s.error),s.readAsArrayBuffer(e)})}(t);i[n]={fileID:n,filename:s,extension:c,status_report:{},source:"",isURL:!1,metadata:"",overwrite:!1,content:d,labels:["Document"],rag_config:l,file_size:S(d),status:"READY"}}l(i),f(Object.keys(i)[0]||null),e.target.value=""}},S=e=>{let t=e.replace(/\s+/g,"");if(t.length%2!=0)throw Error("Invalid hex string length.");return t.length/2};return(0,s.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex h-min w-full items-center justify-end gap-2 rounded-2xl bg-bg-alt-verba p-3 lg:justify-between",children:[(0,s.jsx)("div",{className:"hidden justify-start gap-2 lg:flex",children:(0,s.jsx)(u,{display_text:"File Selection",tooltip_text:"Upload your data through this interface into Verba. You can select individual files, directories or add URL to fetch data from."})}),(0,s.jsxs)("div",{className:"flex justify-center gap-3 lg:justify-end",children:[(0,s.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,s.jsx)("label",{children:(0,s.jsx)(m.A,{Icon:c.j8n,onClick:()=>{var e;return null==(e=document.getElementById("files_upload"))?void 0:e.click()},title:"Files"})}),(0,s.jsx)("ul",{className:"dropdown-content menu z-[1] w-52 rounded-box bg-base-100 p-2 shadow",children:a&&a.Reader&&Object.entries(a.Reader.components).filter(e=>{let[,t]=e;return"URL"!==t.type}).map(e=>{let[t,l]=e;return(0,s.jsx)("li",{onClick:()=>{var e;N(l.name),null==(e=document.getElementById("files_upload"))||e.click(),G()},children:(0,s.jsx)("a",{children:l.name})},"File_".concat(l.name,"_").concat(t))})})]}),(0,s.jsx)("input",{className:"hidden",id:"files_upload",multiple:!0,onChange:e=>C(e,!1),type:"file"}),(0,s.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,s.jsx)("label",{children:(0,s.jsx)(m.A,{Icon:ei.TnM,title:"Directory"})}),(0,s.jsx)("ul",{className:"dropdown-content menu z-[1] w-52 rounded-box bg-base-100 p-2 shadow",children:a&&a.Reader&&Object.entries(a.Reader.components).filter(e=>{let[,t]=e;return"URL"!==t.type}).map(e=>{let[t,l]=e;return(0,s.jsx)("li",{onClick:()=>{var e;_(l.name),null==(e=document.getElementById("dir_upload"))||e.click(),G()},children:(0,s.jsx)("a",{children:l.name})},"Dir_".concat(l.name,"_").concat(t))})})]}),(0,s.jsx)("input",{className:"hidden",id:"dir_upload",multiple:!0,onChange:e=>C(e,!0),ref:v,type:"file"}),(0,s.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,s.jsx)("label",{children:(0,s.jsx)(m.A,{Icon:c.j8n,title:"URL"})}),(0,s.jsx)("input",{className:"hidden",id:"url_upload",type:"file"}),(0,s.jsx)("ul",{className:"dropdown-content menu z-[1] w-52 rounded-box bg-base-100 p-2 shadow",children:a&&a.Reader&&Object.entries(a.Reader.components).filter(e=>{let[,t]=e;return"URL"===t.type}).map(e=>{let[r,i]=e;return(0,s.jsx)("li",{onClick:()=>{(e=>{if(a){let s={...t},r=JSON.parse(JSON.stringify(a));r.Reader&&(r.Reader.selected=e);let i=new Date().toISOString();n("Added new URL Job","SUCCESS"),s[i]={fileID:i,filename:"New ".concat(e," Job"),metadata:"",status_report:{},extension:"URL",isURL:!0,source:"",overwrite:!1,content:"",labels:["Document"],rag_config:r,file_size:0,status:"READY"},l(s),f(i)}})(i.name),G()},children:(0,s.jsx)("a",{children:i.name})},"URL_".concat(i.name,"_").concat(r))})})]})]})]}),(0,s.jsx)("div",{className:"flex h-full w-full flex-col items-center justify-start gap-3 overflow-auto rounded-2xl bg-bg-alt-verba p-6",children:Object.entries(t).map(e=>{let[l,a]=e;return(0,s.jsx)(ek,{fileData:a,fileMap:t,handleDeleteFile:j,selectedFileData:i,setSelectedFileData:f},"FileComponent_".concat(l))})}),"ONLINE"===p?(0,s.jsx)("div",{className:"flex h-min w-full items-center justify-end gap-2 rounded-2xl bg-bg-alt-verba p-3",children:(0,s.jsxs)("div",{className:"flex flex-wrap justify-end gap-3",children:[i&&(0,s.jsx)(m.A,{Icon:o.PiR,onClick:g,title:"Import Selected"}),(0,s.jsx)(m.A,{Icon:o.PiR,onClick:h,title:"Import All"}),(0,s.jsx)(m.A,{Icon:d.uDv,onClick:()=>{let e=document.getElementById("remove_all_files");e instanceof HTMLDialogElement&&e.showModal()},title:"Clear Files"})]})}):(0,s.jsx)("div",{className:"flex h-min w-full items-center justify-end gap-2 rounded-2xl bg-bg-alt-verba p-3",children:(0,s.jsx)("div",{className:"flex justify-end gap-3",children:(0,s.jsxs)("button",{className:"btn flex items-center gap-2 border-none bg-button-verba text-text-verba hover:bg-button-hover-verba",onClick:b,children:[(0,s.jsx)(x.mDV,{size:15}),(0,s.jsx)("p",{children:"Reconnecting..."}),(0,s.jsx)("span",{className:"loading loading-spinner loading-xs"})]})})}),(0,s.jsx)(ef,{modal_id:"remove_all_files",text:"Do you want to clear all files from your selection?",title:"Clear all files?",triggerAccept:e=>j(e),triggerString:"Clear All",triggerValue:null})]})},eE=e=>{let{credentials:t,RAGConfig:l,setRAGConfig:a,addStatusMessage:n}=e,[i,o]=(0,r.useState)({}),[c,d]=(0,r.useState)(null),[x,u]=(0,r.useState)(!1),[m,f]=(0,r.useState)(null),[g,p]=(0,r.useState)("OFFLINE"),b=(0,r.useCallback)(()=>{o(e=>{if(i){let t={...e};for(let e in t){let l=t[e];l&&"DONE"!==l.status&&"ERROR"!==l.status&&"READY"!==l.status&&(l.status="ERROR",l.status_report.ERROR={fileID:e,status:"ERROR",message:"Connection was interrupted",took:0})}return t}return e})},[i]),h=(0,r.useCallback)(e=>{"DONE"===e.status&&n("File ".concat(e.fileID," imported"),"SUCCESS"),"ERROR"===e.status&&n("File ".concat(e.fileID," import failed"),"ERROR"),o(t=>{if(e&&e.fileID in t){let l=JSON.parse(JSON.stringify(t[e.fileID])),s={...t};return l.status=e.status,l.status_report[e.status]=e,s[e.fileID]=l,s}return t})},[n]);(0,r.useEffect)(()=>{u(!0)},[]),(0,r.useEffect)(()=>{let e=new WebSocket((()=>{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return"".concat(e,"//").concat(t,"/ws/import_files")})());return e.onopen=()=>{p("ONLINE")},e.onmessage=e=>{p("ONLINE");try{let t=JSON.parse(e.data);"new_file_id"in t?o(e=>{let l={...e},s=l[t.original_file_id];return s&&(l[t.new_file_id]={...s,fileID:t.new_file_id,filename:t.filename,block:!0,overwrite:s.overwrite}),l}):h(t)}catch(e){return}},e.onerror=e=>{p("OFFLINE"),b(),u(e=>!e)},e.onclose=e=>{p("OFFLINE"),b(),e.wasClean,u(e=>!e)},f(e),()=>{e.readyState!==WebSocket.CLOSED&&e.close()}},[b,h]);let v=(e,l)=>{if((null==m?void 0:m.readyState)===WebSocket.OPEN){(e=>{o(t=>{if(e in t){let l=JSON.parse(JSON.stringify(t[e])),s={...t};return l.status="WAITING",Object.entries(l.status_report).length>0&&(l.status_report={}),s[e]=l,s}return t})})(l);let s=[],a=0;for(;a<e.length;){let t=e.slice(a,a+2e3);s.push(t),a+=2e3}let n=s.length;s.forEach((e,s)=>{m.send(JSON.stringify({chunk:e,isLastChunk:s===n-1,total:n,order:s,fileID:l,credentials:t}))})}else u(e=>!e)};return(0,s.jsxs)("div",{className:"flex h-[80vh] justify-center gap-3",children:[(0,s.jsx)("div",{className:"".concat(c?"hidden md:flex md:w-[45vw]":"w-full md:flex md:w-[45vw]"),children:(0,s.jsx)(eA,{addStatusMessage:n,fileMap:i,importAll:()=>{for(let e in n("Importing all files","INFO"),i){let t=i[e];t&&["READY","DONE","ERROR"].includes(t.status)&&!t.block&&v(JSON.stringify(t),e)}},importSelected:()=>{if(n("Importing selected file","INFO"),c){let e=i[c];e&&["READY","DONE","ERROR"].includes(e.status)&&!e.block&&v(JSON.stringify(e),c)}},RAGConfig:l,reconnect:()=>{u(e=>!e)},selectedFileData:c,setFileMap:o,setRAGConfig:a,setSelectedFileData:d,socketStatus:g})}),(0,s.jsx)("div",{className:"".concat(c?"flex w-full md:w-[55vw]":"hidden md:flex md:w-[55vw]"),children:c&&(0,s.jsx)(eS,{addStatusMessage:n,credentials:t,fileMap:i,RAGConfig:l,selectedFileData:c,setFileMap:o,setRAGConfig:a,setSelectedFileData:d})})]})};var eI=l(64552);let eR=e=>{let{addStatusMessage:t}=e,l=(0,r.useRef)(null),[a,n]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{let e=localStorage.getItem("getting_started");(!e||"false"===e)&&(n(!0),l.current&&l.current.showModal())},[]),a)?(0,s.jsx)("dialog",{className:"modal",id:"Getting-Started-Modal",ref:l,children:(0,s.jsxs)("div",{className:"modal-box w-11/12 max-w-5xl",children:[(0,s.jsx)("div",{className:"hero",children:(0,s.jsxs)("div",{className:"hero-content flex-row",children:[(0,s.jsxs)("div",{className:"text-center lg:text-left",children:[(0,s.jsx)("h1",{className:"font-bold text-2xl md:text-5xl",children:"Welcome to Verba"}),(0,s.jsx)("h2",{className:"mt-2 text-lg md:text-2xl",children:"Your Open Source RAG App"}),(0,s.jsx)("p",{className:"py-6 text-sm md:text-base",children:"Verba is an open-source application designed to offer an end-to-end, streamlined, and user-friendly interface for Retrieval-Augmented Generation (RAG) out of the box. In just a few easy steps, explore your datasets and extract insights with ease, either locally with HuggingFace and Ollama or through LLM providers such as Anthrophic, Cohere, and OpenAI."}),(0,s.jsx)("p",{className:"py-6 text-sm md:text-base",children:"Learn more by visiting our GitHub repository, our blog post, or our video on Verba. Verba is currently still in development. If you have any questions or find issues, please reach out to us on GitHub."}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row",children:[(0,s.jsx)(m.A,{Icon:o.hL4,onClick:()=>window.open("https://github.com/weaviate/verba","_blank"),title:"GitHub"}),(0,s.jsx)(m.A,{Icon:o.Vk6,onClick:()=>window.open("https://www.youtube.com/watch?v=swKKRdLBhas","_blank"),title:"YouTube"}),(0,s.jsx)(m.A,{Icon:f.Bgk,onClick:()=>window.open("https://weaviate.io/blog/verba-open-source-rag-app","_blank"),title:"Blog Post"})]})]}),(0,s.jsx)("div",{className:"hidden shrink-0 md:block",children:(0,s.jsx)(eI.default,{alt:"Verba AI",className:"rounded-lg shadow-2xl",height:300,src:"https://raw.githubusercontent.com/weaviate/Verba/main/img/thumbnail.png",width:400})})]})}),(0,s.jsx)("div",{className:"modal-action mt-6 justify-center md:justify-end",children:(0,s.jsx)("form",{method:"dialog",children:(0,s.jsx)(m.A,{Icon:o.Mbv,onClick:()=>{localStorage.setItem("getting_started","true"),n(!1),t("Achievement unlocked: Welcome to Verba!","SUCCESS")},selected:!0,selected_color:"bg-primary-verba",title:"Let's get started",type:"submit"})})})]})}):null};var eD=l(33107);let eO=e=>{let{Icon:t,title:l,currentPage:a,setPage:n,setCurrentPage:r,hide:i}=e;return(0,s.jsx)(m.A,{disabled:i,Icon:t,onClick:()=>{r(n)},selected:a===n,selected_color:"bg-primary-verba",title:l})};async function eT(){try{let e=await fetch("https://api.github.com/repos/weaviate/verba",{method:"GET"});if(!e.ok)return 0;return(await e.json()).stargazers_count||0}catch(e){return 0}}let eF=e=>{let{imageSrc:t,title:l,subtitle:a,currentPage:n,setCurrentPage:i,production:d}=e,[x,u]=(0,r.useState)("0");return(0,r.useEffect)(()=>{(async()=>{try{let e=await eT();if(e){let t=(e=>e>=1e3?"".concat((e/1e3).toFixed(1).replace(/\.0$/,""),"k"):e.toString())(e);u(t)}}catch(e){}})()},[]),(0,s.jsxs)("div",{className:"mb-10 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center gap-5",children:[(0,s.jsx)("img",{className:"flex w-[60px] rounded-lg object-contain [filter:drop-shadow(0_4px_3px_rgb(0_0_0_/0.07))_drop-shadow(0_2px_2px_rgb(0_0_0_/0.06))]",src:t}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("p",{className:"font-bold text-text-verba text-xl",children:l}),(0,s.jsx)("p",{className:"font-light text-sm text-text-alt-verba",children:a})]}),(0,s.jsx)("div",{className:"flex flex-col items-center justify-between gap-3 md:hidden",children:(0,s.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,s.jsx)(m.A,{Icon:eD.hmT,title:"Menu"}),(0,s.jsxs)("ul",{className:"dropdown-content dropdown-left menu z-[1] w-52 rounded-box bg-base-100 p-2 shadow",children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{className:"CHAT"===n?"font-bold":"",onClick:()=>{i("CHAT"),G()},children:"Chat"})},"Menu Button1"),(0,s.jsx)("li",{children:(0,s.jsx)("a",{className:"DOCUMENTS"===n?"font-bold":"",onClick:()=>{i("DOCUMENTS"),G()},children:"Documents"})},"Menu Button2"),"Demo"!==d&&(0,s.jsx)("li",{children:(0,s.jsx)("a",{className:"ADD"===n?"font-bold":"",onClick:()=>{i("ADD"),G()},children:"Import Data"})},"Menu Button4"),"Demo"!==d&&(0,s.jsx)("li",{children:(0,s.jsx)("a",{className:"SETTINGS"===n?"font-bold":"",onClick:()=>{i("SETTINGS"),G()},children:"Settings"})},"Menu Button5")]})]})})]}),(0,s.jsx)("div",{className:"flex flex-row items-center justify-center",children:(0,s.jsxs)("div",{className:"hidden flex-row items-center justify-between gap-3 md:flex",children:[(0,s.jsx)(eO,{currentPage:n,hide:!1,Icon:f.lhM,setCurrentPage:i,setPage:"CHAT",title:"Chat"}),"Demo"!==d&&(0,s.jsx)(eO,{currentPage:n,hide:!1,Icon:c.j8n,setCurrentPage:i,setPage:"ADD",title:"Import Data"}),(0,s.jsx)(eO,{currentPage:n,hide:!1,Icon:f.uOe,setCurrentPage:i,setPage:"DOCUMENTS",title:"Documents"}),"Demo"!==d&&(0,s.jsx)(eO,{currentPage:n,hide:!1,Icon:f.yOD,setCurrentPage:i,setPage:"SETTINGS",title:"Settings"}),(0,s.jsx)("div",{className:"mx-1 hidden w-px bg-text-alt-verba sm:h-[3vh] md:block lg:h-[5vh]"}),(0,s.jsx)(m.A,{className:"flex-grow",disabled:!1,Icon:o.hL4,icon_size:14,onClick:()=>{window.open("https://github.com/weaviate/verba","_blank","noopener,noreferrer")},selected:!1,title:x})]})})]})};var eP=l(97585);let eM=e=>{let{credentials:t,addStatusMessage:l}=e,[a,n]=(0,r.useState)(null),[c,d]=(0,r.useState)(!1),[x,u]=(0,r.useState)(null),g=async()=>{d(!0);let e=await (0,i.m9)(t);(null==e?void 0:e.error)===""&&(n(e.node_payload),u(e.collection_payload)),d(!1)};(0,r.useEffect)(()=>{d(!0),g(),d(!1)},[g]);let p=async()=>{await (0,i.rR)("DOCUMENTS",t)?(l("All documents reset","SUCCESS"),g()):l("Failed to reset documents","ERROR")},b=async()=>{await (0,i.rR)("ALL",t)?(l("Verba reset","SUCCESS"),g()):l("Failed to reset Verba","ERROR")},h=async()=>{await (0,i.rR)("CONFIG",t)?(l("Config reset","SUCCESS"),g()):l("Failed to reset config","ERROR")},v=async()=>{await (0,i.rR)("SUGGESTIONS",t)?(l("Suggestions reset","SUCCESS"),g()):l("Failed to reset suggestions","ERROR")},j=e=>{let t=document.getElementById(e);t instanceof HTMLDialogElement&&t.showModal()};return(0,s.jsxs)("div",{className:"flex size-full flex-col p-4",children:[(0,s.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,s.jsx)("p",{className:"font-bold text-2xl",children:"Admin Panel"}),(0,s.jsx)(m.A,{className:"max-w-min",Icon:f.UF6,loading:c,onClick:g,title:"Refresh"})]}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 p-4 text-text-verba",children:[(0,s.jsx)("p",{className:"font-bold text-lg",children:"Resetting Verba"}),(0,s.jsx)("div",{className:"flex flex-wrap justify-between gap-2",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)(m.A,{Icon:f.uOe,onClick:()=>j("reset-documents"),title:"Clear Documents"}),(0,s.jsx)(m.A,{Icon:o.Ph,onClick:()=>j("reset-configs"),title:"Clear Config"}),(0,s.jsx)(m.A,{Icon:f.tW_,onClick:()=>j("reset-verba"),title:"Clear Everything"}),(0,s.jsx)(m.A,{Icon:f.tW_,onClick:()=>j("reset-suggestions"),title:"Clear Suggestions"})]})}),(0,s.jsx)("p",{className:"font-bold text-lg",children:"Weaviate Information"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 rounded-lg border-2 border-bg-verba p-4 shadow-sm",children:[(0,s.jsx)("p",{className:"font-semibold text-sm text-text-alt-verba lg:text-base",children:"Connected to"}),(0,s.jsx)("p",{className:"text-text-verba",children:t.url})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 rounded-lg border-2 border-bg-verba p-4 shadow-sm",children:[(0,s.jsx)("p",{className:"font-semibold text-sm text-text-alt-verba lg:text-base",children:"Deployment"}),(0,s.jsx)("p",{className:"text-text-verba",children:t.deployment})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 rounded-lg border-2 border-secondary-verba p-4 shadow-sm",children:[(0,s.jsx)("p",{className:"font-semibold text-sm text-text-alt-verba lg:text-base",children:"Version"}),a?(0,s.jsx)("p",{className:"text-text-verba",children:a.weaviate_version}):(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-col rounded-lg border-2 border-bg-verba p-4 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("p",{className:"font-semibold text-sm text-text-alt-verba lg:text-base",children:"Nodes"}),a?(0,s.jsx)("p",{className:"font-semibold text-sm text-text-alt-verba lg:text-base",children:a.node_count}):(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})]}),a?(0,s.jsx)("ul",{className:"mt-2 flex list-inside list-disc flex-col",children:a.nodes.map(e=>(0,s.jsxs)("li",{className:"flex justify-between text-sm text-text-verba",children:[(0,s.jsx)("span",{className:"w-64 truncate",children:e.name}),(0,s.jsxs)("span",{children:["(",e.status," - ",e.shards," shards)"]})]},"Node".concat(e.name)))}):(0,s.jsx)("span",{className:"loading loading-dots loading-sm mt-2"})]}),(0,s.jsxs)("div",{className:"flex flex-col rounded-lg border-2 border-bg-verba p-4 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("p",{className:"font-semibold text-sm text-text-alt-verba lg:text-base",children:"Collections"}),x?(0,s.jsx)("p",{className:"font-semibold text-sm text-text-alt-verba lg:text-base",children:x.collection_count}):(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})]}),x?(0,s.jsx)("ul",{className:"mt-2 flex list-inside list-disc flex-col",children:x.collections.map(e=>(0,s.jsxs)("li",{className:"flex justify-between text-sm text-text-verba",children:[(0,s.jsx)("span",{className:"w-128 truncate",children:e.name}),(0,s.jsxs)("span",{children:[e.count," objects"]})]},"Collection".concat(e.name)))}):(0,s.jsx)("span",{className:"loading loading-dots loading-sm mt-2"})]})]})}),(0,s.jsx)(ef,{modal_id:"reset-documents",text:"Are you sure you want to reset all documents? This will clear all documents and chunks from Verba.",title:"Reset Documents",triggerAccept:p,triggerString:"Reset"}),(0,s.jsx)(ef,{modal_id:"reset-configs",text:"Are you sure you want to reset the config?",title:"Reset Config",triggerAccept:h,triggerString:"Reset"}),(0,s.jsx)(ef,{modal_id:"reset-verba",text:"Are you sure you want to reset Verba? This will delete all collections related to Verba.",title:"Reset Verba",triggerAccept:b,triggerString:"Reset"}),(0,s.jsx)(ef,{modal_id:"reset-suggestions",text:"Are you sure you want to reset all autocomplete suggestions?",title:"Reset Suggestions",triggerAccept:v,triggerString:"Reset"})]})};var eL=l(49192);let eG=e=>{let{selectedTheme:t,setThemes:l,credentials:a,setSelectedTheme:n,themes:c,addStatusMessage:x}=e,[u,f]=(0,r.useState)(""),g=async()=>{await (0,i.bS)(c,t,a),x("Changes to ".concat(t.theme_name," saved"),"SUCCESS")},p=(e,t)=>{n(l=>{let s=l[e];return b(s)?{...l,[e]:{...s,text:t}}:h(s)?{...l,[e]:{...s,src:t}}:!function(e){return"object"==typeof e&&null!==e&&"type"in e&&"check"===e.type}(s)?v(s)?{...l,[e]:{...s,color:t}}:j(s)||function(e){return"object"==typeof e&&null!==e&&"type"in e&&"number"===e.type}(s)?{...l,[e]:{...s,value:t}}:l:{...l,[e]:{...s,checked:t}}})};function b(e){return"object"==typeof e&&null!==e&&"type"in e&&"text"===e.type}function h(e){return"object"==typeof e&&null!==e&&"type"in e&&"image"===e.type}function v(e){return"object"==typeof e&&null!==e&&"type"in e&&"color"===e.type}function j(e){return"object"==typeof e&&null!==e&&"type"in e&&"select"===e.type}(0,r.useEffect)(()=>{l(e=>{let l={...e};return l[t.theme_name]=t,l})},[t,l]);let w=(e,l)=>{var a,n,r,i;let o=t[e];return(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3 text-text-verba",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:l.description}),"text"===l.type&&b(o)&&(0,s.jsx)("label",{className:"input flex w-full items-center gap-2 border-none bg-bg-verba",children:(0,s.jsx)("input",{className:"w-full grow",onChange:t=>p(e,t.target.value),placeholder:e,type:"text",value:null!=(a=o.text)?a:""})}),"select"===l.type&&j(o)&&(0,s.jsx)("select",{className:"select bg-bg-verba",onChange:t=>{p(e,t.target.value)},value:null!=(n=o.value)?n:"",children:l.options.map(e=>(0,s.jsx)("option",{value:e,children:e},"Select_".concat(e)))}),"color"===l.type&&v(o)&&(0,s.jsxs)("div",{className:"z-10 flex h-[15vh] flex-col gap-1",children:[(0,s.jsx)("label",{className:"input input-sm input-bordered flex w-full items-center gap-2 bg-bg-verba",children:(0,s.jsx)("input",{className:"grow",onChange:t=>{p(e,t.target.value)},placeholder:e,type:"text",value:null!=(r=o.color)?r:""})}),(0,s.jsx)(eL.jI,{className:"z-1",color:null!=(i=o.color)?i:"#000000",onChange:t=>{p(e,t)}})]}),"image"===l.type&&h(o)&&(0,s.jsxs)("div",{className:"flex w-full items-center justify-between gap-4",children:[(0,s.jsx)("div",{className:"flex-grow",children:(0,s.jsx)("label",{className:"input flex w-full items-center gap-2 border-none bg-bg-verba text-text-verba",children:(0,s.jsx)("input",{className:"grow",onChange:e=>f(e.target.value),placeholder:"Enter image URL",type:"text",value:u})})}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(m.A,{onClick:()=>p(e,u),title:"Set Link"}),(0,s.jsx)(m.A,{onClick:()=>{var t;return null==(t=document.getElementById("".concat(e,"ImageInput")))?void 0:t.click()},title:"Upload Image"}),(0,s.jsx)("input",{accept:"image/*",className:"hidden",id:"".concat(e,"ImageInput"),onChange:t=>((e,t)=>{var l;if(null==(l=t.target.files)?void 0:l[0]){let l=new FileReader;l.onload=t=>{var l;"string"==typeof(null==(l=t.target)?void 0:l.result)&&p(e,t.target.result)},l.readAsDataURL(t.target.files[0])}})(e,t),type:"file"})]}),o.src&&(0,s.jsx)("img",{alt:"".concat(e," preview"),className:"max-h-32 max-w-full rounded-xl",src:o.src})]})]})]})},e)};return(0,s.jsxs)("div",{className:"flex size-full flex-col p-4",children:[(0,s.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,s.jsx)("p",{className:"font-bold text-2xl",children:"Customize Theme"}),(0,s.jsx)("select",{className:"select bg-bg-verba",onChange:e=>{let t=c[e.target.value];t&&n(t)},value:Object.keys(c).find(e=>c[e]===t)||"",children:Object.keys(c).map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 p-4",children:[(0,s.jsx)("p",{className:"font-bold",children:"Customize Logo"}),Object.entries(t).filter(e=>{let[,t]=e;return h(t)}).map(e=>{let[t,l]=e;return w(t,l)}),(0,s.jsx)("p",{className:"mt-4 font-bold",children:"Customize Text"}),Object.entries(t).filter(e=>{let[,t]=e;return b(t)}).map(e=>{let[t,l]=e;return w(t,l)}),(0,s.jsx)("p",{className:"mt-4 font-bold",children:"Customize Font"}),Object.entries(t).filter(e=>{let[,t]=e;return j(t)}).map(e=>{let[t,l]=e;return w(t,l)}),(0,s.jsx)("p",{className:"mt-4 font-bold",children:"Customize Color"}),Object.entries(t).filter(e=>{let[,t]=e;return v(t)}).map(e=>{let[t,l]=e;return w(t,l)})]})}),(0,s.jsxs)("div",{className:"mt-3 flex justify-end gap-2",children:[(0,s.jsx)(m.A,{className:"max-w-min",Icon:o.A7C,onClick:g,title:"Save"}),(0,s.jsx)(m.A,{className:"max-w-min",Icon:d.uDv,onClick:()=>{l({Light:ew,Dark:eN,Weaviate:e_,WCD:ey}),n(e_),x("Themes reset","SUCCESS")},title:"Reset"})]})]})};var ez=l(16991),eJ=l(72483);let eU=e=>{let{credentials:t,addStatusMessage:l}=e,[a,n]=(0,r.useState)(1),[c,d]=(0,r.useState)([]),[x,u]=(0,r.useState)(0),g=async()=>{let e=await (0,i.vY)(a,20,t);e&&(d(e.suggestions),u(e.total_count))};(0,r.useEffect)(()=>{g()},[g]),(0,r.useEffect)(()=>{g()},[g]);let p=async e=>{await (0,i.ke)(e,t),await g(),l("Suggestion deleted","SUCCESS")};return(0,s.jsxs)("div",{className:"flex size-full flex-col p-4",children:[(0,s.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,s.jsxs)("p",{className:"font-bold text-2xl",children:["Manage Suggestions (",x,")"]}),(0,s.jsx)(m.A,{className:"max-w-min",Icon:f.UF6,onClick:()=>{g()},title:"Refresh"})]}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,s.jsx)("div",{className:"flex flex-col gap-4 p-4 text-text-verba",children:(0,s.jsx)("div",{className:"flex flex-col gap-2",children:c.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 rounded-xl border-2 bg-bg-alt-verba p-4",children:[(0,s.jsxs)("div",{className:"flex w-2/3 flex-col items-start justify-start gap-2",children:[(0,s.jsx)("p",{className:"flex text-start font-bold text-text-alt-verba text-xs",children:(e=>{try{let t=(0,ez.H)(e);return(0,eJ.m)(t,{addSuffix:!0})}catch(e){return"Invalid date"}})(e.timestamp)}),(0,s.jsx)("p",{className:"max-w-full truncate text-sm text-text-verba",title:e.query,children:e.query})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(m.A,{Icon:f.iyF,onClick:()=>{var t;return t=e.query,void navigator.clipboard.writeText(t).then(()=>{})}}),(0,s.jsx)(m.A,{Icon:f.tW_,onClick:()=>(e=>{let t=document.getElementById(e);t instanceof HTMLDialogElement&&t.showModal()})("remove_suggestion".concat(e.uuid))})]}),(0,s.jsx)(ef,{modal_id:"remove_suggestion".concat(e.uuid),text:"Do you want to remove this suggestion?",title:"Remove Suggestion",triggerAccept:e=>p(e),triggerString:"Delete",triggerValue:e.uuid})]},"Suggestion".concat(e.uuid)))})})}),c.length>0&&(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 bg-bg-alt-verba p-3",children:[(0,s.jsx)(m.A,{className:"btn-sm min-w-min max-w-[200px]",Icon:o.vpL,onClick:()=>{1===a?n(1):n(e=>e-1)},text_class_name:"text-xs",title:"Previous Page"}),(0,s.jsxs)("p",{className:"flex text-text-verba text-xs",children:["Page ",a]}),(0,s.jsx)(m.A,{className:"btn-sm min-w-min max-w-[200px]",Icon:o.QyA,onClick:()=>{20*a<=x?n(e=>e+1):n(1)},text_class_name:"text-xs",title:"Next Page"})]})]})},eB=e=>{let{selectedTheme:t,themes:l,setThemes:a,addStatusMessage:n,setSelectedTheme:i,credentials:c}=e,[d,x]=(0,r.useState)("INFO");return(0,s.jsxs)("div",{className:"flex h-[80vh] justify-center gap-3",children:[(0,s.jsx)("div",{className:"flex w-1/3",children:(0,s.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,s.jsx)("div",{className:"flex h-min w-full items-center justify-between gap-2 rounded-2xl bg-bg-alt-verba p-3",children:(0,s.jsx)("div",{className:"flex justify-start gap-2",children:(0,s.jsx)(u,{display_text:"Settings",tooltip_text:"Customize Verba's Theme, reset collections, logout or report issues."})})}),(0,s.jsxs)("div",{className:"flex w-full flex-col gap-2 overflow-y-auto overflow-x-hidden rounded-2xl bg-bg-alt-verba p-3",children:[(0,s.jsx)(m.A,{Icon:eP.EOO,onClick:()=>x("INFO"),selected:"INFO"===d,selected_color:"bg-secondary-verba",title:"Admin"}),(0,s.jsx)(m.A,{Icon:o.IFh,onClick:()=>x("THEME"),selected:"THEME"===d,selected_color:"bg-secondary-verba",title:"Customize Theme"}),(0,s.jsx)(m.A,{Icon:f.zn$,onClick:()=>x("SUGGESTIONS"),selected:"SUGGESTIONS"===d,selected_color:"bg-secondary-verba",title:"Manage Suggestions"})]}),(0,s.jsxs)("div",{className:"flex w-full flex-col gap-2 overflow-y-auto overflow-x-hidden rounded-2xl bg-bg-alt-verba p-6",children:[(0,s.jsx)(m.A,{Icon:f.Hz_,onClick:()=>window.location.reload(),title:"Logout"}),(0,s.jsx)(m.A,{Icon:_.wmK,onClick:()=>window.open("https://github.com/weaviate/Verba/issues/new/choose","_blank"),title:"Report Issue"})]})]})}),(0,s.jsx)("div",{className:"flex w-2/3",children:(0,s.jsx)("div",{className:"flex w-full flex-col gap-2",children:(0,s.jsxs)("div",{className:"flex h-full w-full flex-col gap-2 overflow-y-auto overflow-x-hidden rounded-2xl bg-bg-alt-verba p-6",children:["THEME"===d&&(0,s.jsx)(eG,{addStatusMessage:n,credentials:c,selectedTheme:t,setSelectedTheme:i,setThemes:a,themes:l}),"INFO"===d&&(0,s.jsx)(eM,{addStatusMessage:n,credentials:c}),"SUGGESTIONS"===d&&(0,s.jsx)(eU,{addStatusMessage:n,credentials:c})]})})})]})},eV=(0,n.default)(()=>Promise.all([l.e(65),l.e(823)]).then(l.bind(l,51823)),{loadableGenerated:{webpack:()=>[51823]},ssr:!1,loading:()=>(0,s.jsx)("div",{className:"flex w-full justify-center p-6",children:(0,s.jsx)("span",{className:"loading loading-spinner"})})}),eW=(0,n.default)(()=>Promise.all([l.e(755),l.e(697),l.e(27)]).then(l.bind(l,77027)),{loadableGenerated:{webpack:()=>[77027]},ssr:!1});function eH(){var e;let[t,l]=(0,r.useState)("CHAT"),[n,o]=(0,r.useState)("Local"),[c,d]=(0,r.useState)(""),[x,u]=(0,r.useState)({Light:ew,Dark:eN,Weaviate:e_,WCD:ey}),[m,f]=(0,r.useState)(()=>{var e;return null!=(e=x.Weaviate)?e:e_}),g=m.font.value,p=g&&(null==(e=L[g])?void 0:e.className)||"",[b,h]=(0,r.useState)(!1),[v,j]=(0,r.useState)(!1),[w,N]=(0,r.useState)(!1),[y,_]=(0,r.useState)({deployment:"Local",url:"",key:"",default_deployment:""}),[C,S]=(0,r.useState)(null),[k,A]=(0,r.useState)([]),[E,I]=(0,r.useState)([]),R=(0,r.useCallback)(async()=>{try{let[e]=await Promise.all([(0,i.T7)()]);e?(o(e.production),d(e.gtag),h(!0),_({deployment:"Local",url:e.deployments.WEAVIATE_URL_VERBA,key:e.deployments.WEAVIATE_API_KEY_VERBA,default_deployment:e.default_deployment})):(h(!1),j(!1))}catch(e){h(!1),j(!1)}},[]);(0,r.useEffect)(()=>{R()},[R]),(0,r.useEffect)(()=>{if(v){let e=setTimeout(()=>{N(!0)},1e3);return()=>clearTimeout(e)}},[v]);let D=(0,r.useCallback)(()=>{var e,t,l,s,a,n,r,i,o,c,d;Object.entries({"--primary-verba":(null==(e=m.primary_color)?void 0:e.color)||e_.primary_color.color,"--secondary-verba":(null==(t=m.secondary_color)?void 0:t.color)||e_.secondary_color.color,"--warning-verba":(null==(l=m.warning_color)?void 0:l.color)||e_.warning_color.color,"--bg-verba":(null==(s=m.bg_color)?void 0:s.color)||e_.bg_color.color,"--bg-alt-verba":(null==(a=m.bg_alt_color)?void 0:a.color)||e_.bg_alt_color.color,"--text-verba":(null==(n=m.text_color)?void 0:n.color)||e_.text_color.color,"--text-alt-verba":(null==(r=m.text_alt_color)?void 0:r.color)||e_.text_alt_color.color,"--button-verba":(null==(i=m.button_color)?void 0:i.color)||e_.button_color.color,"--button-hover-verba":(null==(o=m.button_hover_color)?void 0:o.color)||e_.button_hover_color.color,"--text-verba-button":(null==(c=m.button_text_color)?void 0:c.color)||e_.button_text_color.color,"--text-alt-verba-button":(null==(d=m.button_text_alt_color)?void 0:d.color)||e_.button_text_alt_color.color}).forEach(e=>{let[t,l]=e;document.documentElement.style.setProperty(t,l)})},[m]);(0,r.useEffect)(D,[]);let O=(e,t)=>{I(l=>[...l,{message:e,type:t,timestamp:new Date().toISOString()}])};return(0,s.jsxs)("main",{className:"min-h-screen min-w-screen bg-bg-verba text-text-verba ".concat(p),"data-theme":m.theme,children:[""!==c&&(0,s.jsx)(a.GoogleAnalytics,{gaId:c}),(0,s.jsx)(eW,{set_status_messages:I,status_messages:E}),!v&&b&&(0,s.jsx)(eV,{credentials:y,production:n,setCredentials:_,setIsLoggedIn:j,setRAGConfig:S,setSelectedTheme:f,setThemes:u}),v&&b&&(0,s.jsxs)("div",{className:"transition-opacity duration-1000 ".concat(w?"opacity-100":"opacity-0"," flex flex-col gap-2 p-5"),children:[(0,s.jsx)(eR,{addStatusMessage:O}),(0,s.jsxs)("div",{children:[(0,s.jsx)(eF,{currentPage:t,imageSrc:m.image.src,production:n,setCurrentPage:l,subtitle:m.subtitle.text,title:m.title.text,version:"v2.0.0"}),(0,s.jsx)("div",{className:"".concat("CHAT"===t?"":"hidden"),children:(0,s.jsx)(em,{addStatusMessage:O,credentials:y,currentPage:t,documentFilter:k,production:n,RAGConfig:C,selectedTheme:m,setDocumentFilter:A,setRAGConfig:S})}),"DOCUMENTS"===t&&(0,s.jsx)(ep,{addStatusMessage:O,credentials:y,documentFilter:k,production:n,selectedTheme:m,setDocumentFilter:A}),(0,s.jsx)("div",{className:"".concat("ADD"===t&&"Demo"!==n?"":"hidden"),children:(0,s.jsx)(eE,{addStatusMessage:O,credentials:y,RAGConfig:C,setRAGConfig:S})}),(0,s.jsx)("div",{className:"".concat("SETTINGS"===t&&"Demo"!==n?"":"hidden"),children:(0,s.jsx)(eB,{addStatusMessage:O,credentials:y,selectedTheme:m,setSelectedTheme:f,setThemes:u,themes:x})})]}),(0,s.jsx)("div",{className:"footer footer-center mt-8 bg-bg-verba p-4 text-text-alt-verba transition-all delay-1000 duration-1500",children:(0,s.jsx)("aside",{children:(0,s.jsx)("p",{children:"Build with ♥ and Weaviate \xa9 2024"})})})]}),(0,s.jsx)("img",{referrerPolicy:"no-referrer-when-downgrade",src:"https://static.scarf.sh/a.png?x-pxid=ec666e70-aee5-4e87-bc62-0935afae63ac",alt:"","aria-hidden":"true",width:1,height:1})]})}}},e=>{e.O(0,[89,152,17,669,474,813,800,451,997,885,56,645,188,82,598,340,358],()=>e(e.s=18517)),_N_E=e.O()}]);